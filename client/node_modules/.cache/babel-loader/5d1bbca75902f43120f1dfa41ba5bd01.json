{"ast":null,"code":"var _jsxFileName = \"/Users/nao/code/bathroom/client/src/WaitingRoom.js\";\nimport React, { Component } from 'react';\nimport Pusher from 'pusher-js';\nimport axios from 'axios';\n\nclass WaitingRoom extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      visitors: []\n    };\n    this.visitorsCount = 0;\n\n    this.updateVisitorsCount = () => {\n      visitorsCount = this.state.visitors.length;\n    };\n  }\n\n  componentDidMount() {\n    const pusher = new Pusher('93d5b6db6095187f5ef6', {\n      cluster: 'us2',\n      encrypted: true\n    });\n    axios.get('http://localhost:5000').then(({\n      data\n    }) => {\n      this.setState({\n        visitors: [...data]\n      });\n    }).catch(error => console.log(error));\n    const presenceChannel = pusher.subscribe('presence-bathroomQueue');\n    presenceChannel.bind('pusher:subscription_succeeded', () => {\n      this.setState({\n        visitors: presenceChannel.members\n      });\n      this.updateVisitorsCount();\n      var me = presenceChannel.members.me;\n      var userId = me.id;\n      var userInfo = me.info;\n      console.log(this.state);\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      class: \"users\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 43,\n        columnNumber: 7\n      }\n    }, \"Currently online: \", this.visitorsCount);\n  }\n\n}\n\nexport default WaitingRoom;","map":{"version":3,"sources":["/Users/nao/code/bathroom/client/src/WaitingRoom.js"],"names":["React","Component","Pusher","axios","WaitingRoom","state","visitors","visitorsCount","updateVisitorsCount","length","componentDidMount","pusher","cluster","encrypted","get","then","data","setState","catch","error","console","log","presenceChannel","subscribe","bind","members","me","userId","id","userInfo","info","render"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,MAAP,MAAmB,WAAnB;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AAEA,MAAMC,WAAN,SAA0BH,SAA1B,CAAoC;AAAA;AAAA;AAAA,SAClCI,KADkC,GAC1B;AACNC,MAAAA,QAAQ,EAAE;AADJ,KAD0B;AAAA,SAKlCC,aALkC,GAKlB,CALkB;;AAAA,SAOlCC,mBAPkC,GAOZ,MAAM;AAC1BD,MAAAA,aAAa,GAAG,KAAKF,KAAL,CAAWC,QAAX,CAAoBG,MAApC;AACD,KATiC;AAAA;;AAWlCC,EAAAA,iBAAiB,GAAG;AAClB,UAAMC,MAAM,GAAG,IAAIT,MAAJ,CAAW,sBAAX,EAAmC;AAChDU,MAAAA,OAAO,EAAE,KADuC;AAEhDC,MAAAA,SAAS,EAAE;AAFqC,KAAnC,CAAf;AAKAV,IAAAA,KAAK,CAACW,GAAN,CAAU,uBAAV,EAAmCC,IAAnC,CAAwC,CAAC;AAAEC,MAAAA;AAAF,KAAD,KAAc;AACpD,WAAKC,QAAL,CAAc;AACZX,QAAAA,QAAQ,EAAE,CAAC,GAAGU,IAAJ;AADE,OAAd;AAGD,KAJD,EAIGE,KAJH,CAISC,KAAK,IAAIC,OAAO,CAACC,GAAR,CAAYF,KAAZ,CAJlB;AAMA,UAAMG,eAAe,GAAGX,MAAM,CAACY,SAAP,CAAiB,wBAAjB,CAAxB;AACAD,IAAAA,eAAe,CAACE,IAAhB,CAAqB,+BAArB,EAAsD,MAAM;AAC1D,WAAKP,QAAL,CAAc;AAAEX,QAAAA,QAAQ,EAAEgB,eAAe,CAACG;AAA5B,OAAd;AACA,WAAKjB,mBAAL;AAEA,UAAIkB,EAAE,GAAGJ,eAAe,CAACG,OAAhB,CAAwBC,EAAjC;AACA,UAAIC,MAAM,GAAGD,EAAE,CAACE,EAAhB;AACA,UAAIC,QAAQ,GAAGH,EAAE,CAACI,IAAlB;AAEAV,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKhB,KAAjB;AACD,KATD;AAUD;;AAED0B,EAAAA,MAAM,GAAG;AACP,wBACE;AAAK,MAAA,KAAK,EAAC,OAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BACqB,KAAKxB,aAD1B,CADF;AAKD;;AA1CiC;;AA8CpC,eAAeH,WAAf","sourcesContent":["import React, { Component } from 'react';\nimport Pusher from 'pusher-js';\nimport axios from 'axios';\n\nclass WaitingRoom extends Component {\n  state = {\n    visitors: [],\n  };\n\n  visitorsCount = 0;\n\n  updateVisitorsCount = () => {\n    visitorsCount = this.state.visitors.length;\n  }\n\n  componentDidMount() {\n    const pusher = new Pusher('93d5b6db6095187f5ef6', {\n      cluster: 'us2',\n      encrypted: true,\n    });\n\n    axios.get('http://localhost:5000').then(({ data }) => {\n      this.setState({\n        visitors: [...data],\n      });\n    }).catch(error => console.log(error))\n\n    const presenceChannel = pusher.subscribe('presence-bathroomQueue');\n    presenceChannel.bind('pusher:subscription_succeeded', () => {\n      this.setState({ visitors: presenceChannel.members });\n      this.updateVisitorsCount();\n\n      var me = presenceChannel.members.me;\n      var userId = me.id;\n      var userInfo = me.info;\n\n      console.log(this.state);\n    });\n  }\n\n  render() {\n    return (\n      <div class=\"users\">\n        Currently online: {this.visitorsCount}\n      </div>\n    );\n  }\n\n}\n\nexport default WaitingRoom;"]},"metadata":{},"sourceType":"module"}