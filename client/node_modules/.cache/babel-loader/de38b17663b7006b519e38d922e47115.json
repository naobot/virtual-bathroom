{"ast":null,"code":"var _jsxFileName = \"/Users/nao/code/bathroom/client/src/WaitingRoom.js\";\nimport React, { Component } from 'react';\nimport Pusher from 'pusher-js';\nimport axios from 'axios';\n\nclass WaitingRoom extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      visitors: []\n    };\n  }\n\n  componentDidMount() {\n    const pusher = new Pusher('93d5b6db6095187f5ef6', {\n      cluster: 'us2',\n      encrypted: true\n    }); // axios.get('http://localhost:5000').then(({ data }) => {\n    //   this.setState({\n    //     visitors: [...data],\n    //   });\n    // }).catch(error => console.log(error))\n\n    const presenceChannel = pusher.subscribe('presence-bathroomQueue');\n    presenceChannel.bind('pusher:subscription_succeeded', () => {\n      this.setState({\n        visitors: presenceChannel.members\n      });\n      var me = presenceChannel.members.me;\n      var userId = me.id;\n      var userInfo = me.info;\n      console.log(this.state);\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/React.createElement(\"div\", {\n      class: \"users\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 39,\n        columnNumber: 7\n      }\n    }, \"Currently online: \", this.state.visitors.count);\n  }\n\n}\n\nexport default WaitingRoom;","map":{"version":3,"sources":["/Users/nao/code/bathroom/client/src/WaitingRoom.js"],"names":["React","Component","Pusher","axios","WaitingRoom","constructor","props","state","visitors","componentDidMount","pusher","cluster","encrypted","presenceChannel","subscribe","bind","setState","members","me","userId","id","userInfo","info","console","log","render","count"],"mappings":";AAAA,OAAOA,KAAP,IAAgBC,SAAhB,QAAiC,OAAjC;AACA,OAAOC,MAAP,MAAmB,WAAnB;AACA,OAAOC,KAAP,MAAkB,OAAlB;;AAEA,MAAMC,WAAN,SAA0BH,SAA1B,CAAoC;AAClCI,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AACXC,MAAAA,QAAQ,EAAE;AADC,KAAb;AAGD;;AAEDC,EAAAA,iBAAiB,GAAG;AAClB,UAAMC,MAAM,GAAG,IAAIR,MAAJ,CAAW,sBAAX,EAAmC;AAChDS,MAAAA,OAAO,EAAE,KADuC;AAEhDC,MAAAA,SAAS,EAAE;AAFqC,KAAnC,CAAf,CADkB,CAMlB;AACA;AACA;AACA;AACA;;AAEA,UAAMC,eAAe,GAAGH,MAAM,CAACI,SAAP,CAAiB,wBAAjB,CAAxB;AACAD,IAAAA,eAAe,CAACE,IAAhB,CAAqB,+BAArB,EAAsD,MAAM;AAC1D,WAAKC,QAAL,CAAc;AAAER,QAAAA,QAAQ,EAAEK,eAAe,CAACI;AAA5B,OAAd;AAEA,UAAIC,EAAE,GAAGL,eAAe,CAACI,OAAhB,CAAwBC,EAAjC;AACA,UAAIC,MAAM,GAAGD,EAAE,CAACE,EAAhB;AACA,UAAIC,QAAQ,GAAGH,EAAE,CAACI,IAAlB;AAEAC,MAAAA,OAAO,CAACC,GAAR,CAAY,KAAKjB,KAAjB;AACD,KARD;AASD;;AAEDkB,EAAAA,MAAM,GAAG;AACP,wBACE;AAAK,MAAA,KAAK,EAAC,OAAX;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,6BACqB,KAAKlB,KAAL,CAAWC,QAAX,CAAoBkB,KADzC,CADF;AAKD;;AAtCiC;;AA0CpC,eAAetB,WAAf","sourcesContent":["import React, { Component } from 'react';\nimport Pusher from 'pusher-js';\nimport axios from 'axios';\n\nclass WaitingRoom extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      visitors: [],\n    };\n  }\n\n  componentDidMount() {\n    const pusher = new Pusher('93d5b6db6095187f5ef6', {\n      cluster: 'us2',\n      encrypted: true,\n    });\n\n    // axios.get('http://localhost:5000').then(({ data }) => {\n    //   this.setState({\n    //     visitors: [...data],\n    //   });\n    // }).catch(error => console.log(error))\n\n    const presenceChannel = pusher.subscribe('presence-bathroomQueue');\n    presenceChannel.bind('pusher:subscription_succeeded', () => {\n      this.setState({ visitors: presenceChannel.members });\n\n      var me = presenceChannel.members.me;\n      var userId = me.id;\n      var userInfo = me.info;\n\n      console.log(this.state);\n    });\n  }\n\n  render() {\n    return (\n      <div class=\"users\">\n        Currently online: {this.state.visitors.count}\n      </div>\n    );\n  }\n\n}\n\nexport default WaitingRoom;"]},"metadata":{},"sourceType":"module"}