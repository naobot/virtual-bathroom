{"ast":null,"code":"var _jsxFileName = \"/Users/nao/code/bathroom/client/src/App.js\";\nimport React, { Component } from 'react';\nimport Pusher from 'pusher-js';\nimport axios from 'axios';\nimport './App.css';\n\nclass App extends Component {\n  constructor(...args) {\n    super(...args);\n    this.state = {\n      username: '',\n      newComment: '',\n      comments: []\n    };\n\n    this.updateInput = event => {\n      const {\n        name,\n        value\n      } = event.target;\n      this.setState({\n        [name]: value\n      });\n    };\n\n    this.postComment = event => {\n      event.preventDefault();\n      const {\n        username,\n        newComment\n      } = this.state;\n      if (username.trim() === '' || newComment.trim() === '') return;\n      const data = {\n        name: username,\n        text: newComment,\n        votes: 0\n      };\n      axios.post('http://localhost:5000/comment', data).then(() => {\n        this.setState({\n          username: '',\n          newComment: ''\n        });\n      }).catch(error => console.log(error));\n    };\n  }\n\n  componentDidMount() {\n    const pusher = new Pusher('93d5b6db6095187f5ef6', {\n      cluster: 'us2',\n      encrypted: true\n    });\n    axios.get('http://localhost:5000').then(({\n      data\n    }) => {\n      this.setState({\n        comments: [...data]\n      });\n    }).catch(error => console.log(error));\n    const channel = pusher.subscribe('comments');\n    channel.bind('new-comment', data => {\n      this.setState(prevState => {\n        const {\n          comments\n        } = prevState;\n        comments.push(data.comment);\n        return {\n          comments\n        };\n      });\n    });\n  }\n\n  render() {\n    const {\n      username,\n      newComment,\n      comments\n    } = this.state;\n    const userComments = comments.map(e => /*#__PURE__*/React.createElement(\"article\", {\n      className: \"comment\",\n      key: e._id,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      className: \"comment-user\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 72,\n        columnNumber: 9\n      }\n    }, e.name), /*#__PURE__*/React.createElement(\"p\", {\n      className: \"comment-text\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 73,\n        columnNumber: 9\n      }\n    }, e.text), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"voting\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"div\", {\n      className: \"vote-buttons\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"button\", {\n      className: \"upvote\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 13\n      }\n    }, \"Upvote\"), /*#__PURE__*/React.createElement(\"button\", {\n      className: \"downvote\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 13\n      }\n    }, \"Downvote\")), /*#__PURE__*/React.createElement(\"div\", {\n      className: \"votes\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 11\n      }\n    }, \"Votes: \", e.votes))));\n    return /*#__PURE__*/React.createElement(\"div\", {\n      className: \"App\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(\"article\", {\n      className: \"post\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"h1\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 11\n      }\n    }, \"Interesting Video\"), /*#__PURE__*/React.createElement(\"iframe\", {\n      title: \"video\",\n      width: \"560\",\n      height: \"315\",\n      src: \"https://www.youtube.com/embed/PC60fAKJiek\",\n      frameborder: \"0\",\n      allow: \"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\",\n      allowfullscreen: true,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 11\n      }\n    }), /*#__PURE__*/React.createElement(\"p\", {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 11\n      }\n    }, \"Leave a comment if you enjoyed the video above\")), /*#__PURE__*/React.createElement(\"section\", {\n      className: \"comments-form\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(\"form\", {\n      onSubmit: this.postComment,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 11\n      }\n    }, /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"username\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 13\n      }\n    }, \"Name:\"), /*#__PURE__*/React.createElement(\"input\", {\n      className: \"username\",\n      name: \"username\",\n      id: \"username\",\n      type: \"name\",\n      value: username,\n      onChange: this.updateInput,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"label\", {\n      htmlFor: \"new-comment\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 115,\n        columnNumber: 13\n      }\n    }, \"Comment:\"), /*#__PURE__*/React.createElement(\"textarea\", {\n      className: \"comment\",\n      name: \"newComment\",\n      id: \"new-comment\",\n      value: newComment,\n      onChange: this.updateInput,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 116,\n        columnNumber: 13\n      }\n    }), /*#__PURE__*/React.createElement(\"button\", {\n      type: \"submit\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 123,\n        columnNumber: 13\n      }\n    }, \"Have your say\"))), /*#__PURE__*/React.createElement(\"section\", {\n      className: \"comments-section\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 126,\n        columnNumber: 9\n      }\n    }, userComments));\n  }\n\n}\n\nexport default App;","map":{"version":3,"sources":["/Users/nao/code/bathroom/client/src/App.js"],"names":["React","Component","Pusher","axios","App","state","username","newComment","comments","updateInput","event","name","value","target","setState","postComment","preventDefault","trim","data","text","votes","post","then","catch","error","console","log","componentDidMount","pusher","cluster","encrypted","get","channel","subscribe","bind","prevState","push","comment","render","userComments","map","e","_id"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport Pusher from 'pusher-js';\nimport axios from 'axios';\nimport './App.css';\n\nclass App extends Component {\n  state = {\n    username: '',\n    newComment: '',\n    comments: [],\n  };\n\n  updateInput = event => {\n    const { name, value } = event.target;\n    this.setState({\n      [name]: value,\n    });\n  };\n\n  postComment = event => {\n    event.preventDefault();\n    const { username, newComment } = this.state;\n    if (username.trim() === '' || newComment.trim() === '') return;\n\n    const data = {\n      name: username,\n      text: newComment,\n      votes: 0,\n    };\n\n    axios\n      .post('http://localhost:5000/comment', data)\n      .then(() => {\n        this.setState({\n          username: '',\n          newComment: '',\n        });\n      })\n      .catch(error => console.log(error));\n  };\n\n  componentDidMount() {\n    const pusher = new Pusher('93d5b6db6095187f5ef6', {\n      cluster: 'us2',\n      encrypted: true,\n    });\n\n    axios.get('http://localhost:5000').then(({ data }) => {\n      this.setState({\n        comments: [...data],\n      });\n    }).catch(error => console.log(error))\n\n    const channel = pusher.subscribe('comments');\n    channel.bind('new-comment', data => {\n      this.setState(prevState => {\n        const { comments } = prevState;\n        comments.push(data.comment);\n\n        return {\n          comments,\n        };\n      });\n    });\n  }\n\n  render() {\n    const { username, newComment, comments } = this.state;\n\n    const userComments = comments.map(e => (\n      <article className=\"comment\" key={e._id}>\n        <h1 className=\"comment-user\">{e.name}</h1>\n        <p className=\"comment-text\">{e.text}</p>\n        <div className=\"voting\">\n          <div className=\"vote-buttons\">\n            <button className=\"upvote\">\n              Upvote\n            </button>\n            <button className=\"downvote\">\n              Downvote\n            </button>\n          </div>\n          <div className=\"votes\">Votes: {e.votes}</div>\n        </div>\n      </article>\n    ));\n\n    return (\n      <div className=\"App\">\n        <article className=\"post\">\n          <h1>Interesting Video</h1>\n          <iframe\n            title=\"video\"\n            width=\"560\"\n            height=\"315\"\n            src=\"https://www.youtube.com/embed/PC60fAKJiek\"\n            frameborder=\"0\"\n            allow=\"accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture\"\n            allowfullscreen\n          />\n          <p>Leave a comment if you enjoyed the video above</p>\n        </article>\n        <section className=\"comments-form\">\n          <form onSubmit={this.postComment}>\n            <label htmlFor=\"username\">Name:</label>\n            <input\n              className=\"username\"\n              name=\"username\"\n              id=\"username\"\n              type=\"name\"\n              value={username}\n              onChange={this.updateInput}\n            />\n\n            <label htmlFor=\"new-comment\">Comment:</label>\n            <textarea\n              className=\"comment\"\n              name=\"newComment\"\n              id=\"new-comment\"\n              value={newComment}\n              onChange={this.updateInput}\n            />\n            <button type=\"submit\">Have your say</button>\n          </form>\n        </section>\n        <section className=\"comments-section\">{userComments}</section>\n      </div>\n    );\n  }\n}\n\nexport default App;"]},"metadata":{},"sourceType":"module"}