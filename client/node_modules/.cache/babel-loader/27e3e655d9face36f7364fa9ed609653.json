{"ast":null,"code":"var _jsxFileName = \"/Users/nao/code/bathroom/client/src/PusherTest.js\";\nimport React from 'react';\nimport Pusher from 'pusher-js'; // Enable pusher logging - don't include this in production\n\nPusher.logToConsole = true;\nconst pusher = new Pusher('93d5b6db6095187f5ef6', {\n  // Replace with 'key' from dashboard\n  cluster: 'us2',\n  // Replace with 'cluster' from dashboard\n  forceTLS: true,\n  authEndpoint: \"http://localhost:5000/pusher/auth\"\n});\n\nif (!document.cookie.match('(^|;) ?user_id=([^;]*)(;|$)')) {\n  // Primitive auth! This 'user_id' cookie is read by your auth endpoint,\n  // and used as the user_id in the subscription to the 'presence-quickstart' \n  // channel. This is then displayed to all users in the user list. \n  // In your production app, you should use a secure auth system.\n  document.cookie = 'user_id=' + prompt(\"Your initials:\");\n}\n\nconst channel = pusher.subscribe('presence-quickstart');\n\nconst hashCode = s => s.split('').reduce((a, b) => {\n  a = (a << 5) - a + b.charCodeAt(0);\n  return a & a;\n}, 0);\n\nfunction addMemberToUserList(memberId) {\n  userEl = document.createElement(\"div\");\n  userEl.id = \"user_\" + memberId;\n  userEl.innerText = memberId;\n  userEl.style.backgroundColor = 'hsl(' + hashCode(memberId) % 360 + ',70%,60%)';\n  document.getElementById(\"user_list\").appendChild(userEl);\n}\n\nchannel.bind('pusher:subscription_succeeded', () => channel.members.each(member => addMemberToUserList(member.id)));\nchannel.bind('pusher:member_added', member => addMemberToUserList(member.id));\nchannel.bind('pusher:member_removed', member => {\n  const userEl = document.getElementById(\"user_\" + member.id);\n  userEl.parentNode.removeChild(userEl);\n});\n\nfunction PusherTest() {\n  return /*#__PURE__*/React.createElement(\"div\", {\n    className: \"PusherTest\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 38,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"h1\", {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 39,\n      columnNumber: 7\n    }\n  }, \"Pusher Test\"), /*#__PURE__*/React.createElement(\"div\", {\n    id: \"user_list\",\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 40,\n      columnNumber: 7\n    }\n  }));\n}\n\nexport default PusherTest;","map":{"version":3,"sources":["/Users/nao/code/bathroom/client/src/PusherTest.js"],"names":["React","Pusher","logToConsole","pusher","cluster","forceTLS","authEndpoint","document","cookie","match","prompt","channel","subscribe","hashCode","s","split","reduce","a","b","charCodeAt","addMemberToUserList","memberId","userEl","createElement","id","innerText","style","backgroundColor","getElementById","appendChild","bind","members","each","member","parentNode","removeChild","PusherTest"],"mappings":";AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,MAAP,MAAmB,WAAnB,C,CAEA;;AACAA,MAAM,CAACC,YAAP,GAAsB,IAAtB;AACA,MAAMC,MAAM,GAAG,IAAIF,MAAJ,CAAW,sBAAX,EAAmC;AAAE;AAClDG,EAAAA,OAAO,EAAE,KADuC;AACnB;AAC7BC,EAAAA,QAAQ,EAAE,IAFsC;AAGhDC,EAAAA,YAAY,EAAE;AAHkC,CAAnC,CAAf;;AAMA,IAAI,CAACC,QAAQ,CAACC,MAAT,CAAgBC,KAAhB,CAAsB,6BAAtB,CAAL,EAA2D;AACzD;AACA;AACA;AACA;AACAF,EAAAA,QAAQ,CAACC,MAAT,GAAkB,aAAaE,MAAM,CAAC,gBAAD,CAArC;AACD;;AACD,MAAMC,OAAO,GAAGR,MAAM,CAACS,SAAP,CAAiB,qBAAjB,CAAhB;;AACA,MAAMC,QAAQ,GAAGC,CAAC,IAAIA,CAAC,CAACC,KAAF,CAAQ,EAAR,EAAYC,MAAZ,CAAmB,CAACC,CAAD,EAAGC,CAAH,KAAO;AAACD,EAAAA,CAAC,GAAE,CAACA,CAAC,IAAE,CAAJ,IAAOA,CAAR,GAAWC,CAAC,CAACC,UAAF,CAAa,CAAb,CAAb;AAA6B,SAAOF,CAAC,GAACA,CAAT;AAAW,CAAnE,EAAoE,CAApE,CAAtB;;AACA,SAASG,mBAAT,CAA6BC,QAA7B,EAAuC;AACrCC,EAAAA,MAAM,GAAGf,QAAQ,CAACgB,aAAT,CAAuB,KAAvB,CAAT;AACAD,EAAAA,MAAM,CAACE,EAAP,GAAY,UAAQH,QAApB;AACAC,EAAAA,MAAM,CAACG,SAAP,GAAmBJ,QAAnB;AACAC,EAAAA,MAAM,CAACI,KAAP,CAAaC,eAAb,GAA+B,SAAOd,QAAQ,CAACQ,QAAD,CAAR,GAAmB,GAA1B,GAA8B,WAA7D;AACAd,EAAAA,QAAQ,CAACqB,cAAT,CAAwB,WAAxB,EAAqCC,WAArC,CAAiDP,MAAjD;AACD;;AACDX,OAAO,CAACmB,IAAR,CAAa,+BAAb,EAA8C,MAC5CnB,OAAO,CAACoB,OAAR,CAAgBC,IAAhB,CAAqBC,MAAM,IAAIb,mBAAmB,CAACa,MAAM,CAACT,EAAR,CAAlD,CADF;AAEAb,OAAO,CAACmB,IAAR,CAAa,qBAAb,EAAoCG,MAAM,IAAIb,mBAAmB,CAACa,MAAM,CAACT,EAAR,CAAjE;AACAb,OAAO,CAACmB,IAAR,CAAa,uBAAb,EAAsCG,MAAM,IAAI;AAC9C,QAAMX,MAAM,GAAGf,QAAQ,CAACqB,cAAT,CAAwB,UAAQK,MAAM,CAACT,EAAvC,CAAf;AACAF,EAAAA,MAAM,CAACY,UAAP,CAAkBC,WAAlB,CAA8Bb,MAA9B;AACD,CAHD;;AAKA,SAASc,UAAT,GAAsB;AACpB,sBACE;AAAK,IAAA,SAAS,EAAC,YAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,kBACE;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,mBADF,eAEE;AAAK,IAAA,EAAE,EAAC,WAAR;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,IAFF,CADF;AAMD;;AAED,eAAeA,UAAf","sourcesContent":["import React from 'react';\nimport Pusher from 'pusher-js';\n\n// Enable pusher logging - don't include this in production\nPusher.logToConsole = true;\nconst pusher = new Pusher('93d5b6db6095187f5ef6', { // Replace with 'key' from dashboard\n  cluster: 'us2',              // Replace with 'cluster' from dashboard\n  forceTLS: true,\n  authEndpoint: \"http://localhost:5000/pusher/auth\"\n});\n\nif (!document.cookie.match('(^|;) ?user_id=([^;]*)(;|$)')) {\n  // Primitive auth! This 'user_id' cookie is read by your auth endpoint,\n  // and used as the user_id in the subscription to the 'presence-quickstart' \n  // channel. This is then displayed to all users in the user list. \n  // In your production app, you should use a secure auth system.\n  document.cookie = 'user_id=' + prompt(\"Your initials:\");\n}\nconst channel = pusher.subscribe('presence-quickstart');\nconst hashCode = s => s.split('').reduce((a,b)=>{a=((a<<5)-a)+b.charCodeAt(0);return a&a},0);\nfunction addMemberToUserList(memberId) {\n  userEl = document.createElement(\"div\");\n  userEl.id = \"user_\"+memberId;\n  userEl.innerText = memberId;\n  userEl.style.backgroundColor = 'hsl('+hashCode(memberId)%360+',70%,60%)';\n  document.getElementById(\"user_list\").appendChild(userEl);\n}\nchannel.bind('pusher:subscription_succeeded', () => \n  channel.members.each(member => addMemberToUserList(member.id)));\nchannel.bind('pusher:member_added', member => addMemberToUserList(member.id));\nchannel.bind('pusher:member_removed', member => {\n  const userEl = document.getElementById(\"user_\"+member.id);\n  userEl.parentNode.removeChild(userEl);\n});\n\nfunction PusherTest() {\n  return (\n    <div className=\"PusherTest\">\n      <h1>Pusher Test</h1>\n      <div id=\"user_list\"></div>\n    </div>\n  );\n}\n\nexport default PusherTest;\n"]},"metadata":{},"sourceType":"module"}