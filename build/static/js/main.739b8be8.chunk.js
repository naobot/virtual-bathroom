(this["webpackJsonpreact-bathroom"]=this["webpackJsonpreact-bathroom"]||[]).push([[0],{28:function(e,t,n){e.exports=n(55)},33:function(e,t,n){},53:function(e,t,n){},54:function(e,t,n){},55:function(e,t,n){"use strict";n.r(t);var a=n(0),l=n.n(a),r=n(24),c=n.n(r),i=(n(33),n(25)),o=n(2),u=n(3),s=n(1),h=n(5),m=n(4),d=n(13),p=n.n(d),b=n(9),v=n.n(b),f=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(){return Object(o.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props.onClick;return l.a.createElement("button",{onClick:e},this.props.buttonText)}}]),n}(a.PureComponent),k=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).handleEnterBathroomClick=a.handleEnterBathroomClick.bind(Object(s.a)(a)),a}return Object(u.a)(n,[{key:"handleEnterBathroomClick",value:function(e){this.props.onEnterBathroom(e)}},{key:"render",value:function(){return l.a.createElement("div",{id:"hallway",className:"view layer","data-depth":"0.2"},l.a.createElement("div",{className:"content"},l.a.createElement("h2",null,"Hallway"),l.a.createElement("div",{className:"hotspots"},l.a.createElement(f,{onClick:this.handleEnterBathroomClick,buttonText:"Enter Bathroom"}))))}}]),n}(a.PureComponent),E=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).pusher=e.pusher,a.state={me:0,occupants:{count:0}},a.countOccupants=a.countOccupants.bind(Object(s.a)(a)),a.sortByEntryTime=a.sortByEntryTime.bind(Object(s.a)(a)),a.handleEnterRoomClick=a.handleEnterRoomClick.bind(Object(s.a)(a)),a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.presenceChannel=this.pusher.subscribe("presence-bathroom"),this.presenceChannel.bind("pusher:subscription_succeeded",(function(){e.setState({me:e.presenceChannel.members.me.id}),e.updateOccupants(e.presenceChannel.members)})),this.presenceChannel.bind("pusher:member_added",(function(){e.updateOccupants(e.presenceChannel.members)})),this.presenceChannel.bind("pusher:member_removed",(function(){e.updateOccupants(e.presenceChannel.members),console.log("WaitingRoom.js: someone left Room ".concat(e.id))}))}},{key:"countOccupants",value:function(e){var t=0;return e.count>0&&e.each((function(e){e.info.isSpy||t++})),t}},{key:"updateOccupants",value:function(e){var t=this;console.log("WaitingRoom.js updateOccupants: numOccupants ".concat(e.count)),this.setState({occupants:e},(function(){return t.props.onOccupancyChange(t.countOccupants(e),"waiting")}))}},{key:"handleEnterRoomClick",value:function(e){this.props.onEnterRoom(e)}},{key:"sortByEntryTime",value:function(e){var t=[];return e.forEach((function(e){t.push(e)})),t.sort((function(e,t){return parseInt(e.info.entry_time)<parseInt(t.info.entry_time)?-1:parseInt(e.info.entry_time)>parseInt(t.info.entry_time)?1:0}))}},{key:"render",value:function(){var e=this,t=[],n=[];this.state.occupants.count>0&&(this.state.occupants.each((function(a){a.info.isSpy||(t.push(a),a.id.toString()===e.state.me.toString()?n.push(l.a.createElement("li",{key:a.id.toString()},l.a.createElement("strong",null,a.id)," (",a.info.entry_time,")")):n.push(l.a.createElement("li",{key:a.id.toString()},a.id," (",a.info.entry_time,")")))})),t=this.sortByEntryTime(t));var a=t.map((function(e){return e.id.toString()})).indexOf(this.state.me.toString()),r="please wait...";return r=a>0?"".concat(a," ahead of you in line"):l.a.createElement(f,{onClick:this.handleEnterRoomClick,buttonText:"Enter Stall"}),l.a.createElement("div",{id:"waiting",className:"view layer","data-depth":"0.2"},l.a.createElement("div",{className:"content"},l.a.createElement("div",null,l.a.createElement("h2",null,"Waiting Room")),l.a.createElement("div",null,"In line: ",this.countOccupants(this.state.occupants)),l.a.createElement("div",null,l.a.createElement("ul",null,n),r)))}}]),n}(a.Component),C=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).handleNavigationClick=a.handleNavigationClick.bind(Object(s.a)(a)),a}return Object(u.a)(n,[{key:"handleNavigationClick",value:function(e){this.props.handleNavigationClick(e)}},{key:"render",value:function(){var e="stall-".concat(this.props.direction);return l.a.createElement("div",{id:e,className:"view layer","data-depth":"0.2"},l.a.createElement("div",{className:"content"},l.a.createElement("h2",null,"Stall: ",this.props.direction),this.props.children))}}]),n}(a.PureComponent),g=n(8),y=n(27),O=n(14),x=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).stallMap=e.stallMap,a.myHex=e.myHex,a.getColorStyle=a.getColorStyle.bind(Object(s.a)(a)),a}return Object(u.a)(n,[{key:"getColorStyle",value:function(e){return{color:e}}},{key:"render",value:function(){var e=this,t=this.props.chats.map((function(t){return l.a.createElement("div",null,l.a.createElement("div",{className:"row show-grid"},l.a.createElement("div",{className:"col-xs-12"},l.a.createElement("div",{className:"chatMessage"},l.a.createElement("div",{key:t.id,className:"box"},l.a.createElement("p",null,l.a.createElement("strong",{style:e.getColorStyle(t.userhex)},t.userhex===e.myHex?"you":"someone")),l.a.createElement("p",null,t.message))))))}));return l.a.createElement("div",{id:"chatlist"},l.a.createElement("ul",null,t))}}]),n}(a.Component),N=n(26),j=n.n(N);v.a.config({path:".env"});var w=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).stallsByOccupant=Object.assign.apply(Object,[{}].concat(Object(O.a)(Object.entries(e.occupantsByStall).map((function(e){var t=Object(y.a)(e,2),n=t[0],a=t[1];return Object(g.a)({},a,n)}))))),a.channel=e.channel,a.myId=e.myId,a.userHex=e.userHex,a.handleTextChange=a.handleTextChange.bind(Object(s.a)(a)),a.scrollToBottom=a.scrollToBottom.bind(Object(s.a)(a)),a.state={text:"",chats:[]},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.channel.bind("message",(function(t){e.setState({chats:[].concat(Object(O.a)(e.state.chats),[t]),test:""})}))}},{key:"componentDidUpdate",value:function(){this.scrollToBottom()}},{key:"scrollToBottom",value:function(){this.messagesEnd.scrollIntoView({behavior:"smooth"})}},{key:"handleTextChange",value:function(e){if(13===e.keyCode){var t,n={channel_name:this.channel.name,userId:this.myId,userhex:this.userHex,message:this.state.text};t="https://virtual-bathroom.herokuapp.com/",j.a.post(t+"message",n),this.setState({text:""}),this.scrollToBottom()}else this.setState({text:e.target.value})}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{id:"chatbox",className:"component-box"},l.a.createElement("h2",null,"Chatbox"),l.a.createElement("div",{className:"chatlist-container"},l.a.createElement(x,{chats:this.state.chats,myHex:this.userHex,stallMap:this.stallsByOccupant}),l.a.createElement("div",{style:{float:"left",clear:"both"},ref:function(t){e.messagesEnd=t}})),l.a.createElement("input",{type:"text",value:this.state.text,placeholder:"chat here...",onChange:this.handleTextChange,onKeyDown:this.handleTextChange}))}}]),n}(a.Component),T=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).channel=e.channel,a.userHex=e.userHex,a.myId=e.myId,a.handleNavigationClick=a.handleNavigationClick.bind(Object(s.a)(a)),a}return Object(u.a)(n,[{key:"handleNavigationClick",value:function(e){this.props.handleNavigationClick(e)}},{key:"render",value:function(){var e=this;return l.a.createElement("div",{id:"stall-right",className:"view layer"},l.a.createElement("div",{className:"content"},l.a.createElement("h2",null,"Stall: Right"),l.a.createElement(f,{onClick:function(){return e.handleNavigationClick("stall-front")},buttonText:"Front"}),l.a.createElement("br",null),l.a.createElement(f,{onClick:function(){return e.handleNavigationClick("stall-up")},buttonText:"Up"}),l.a.createElement("br",null),l.a.createElement(f,{onClick:function(){return e.handleNavigationClick("stall-left")},buttonText:"Left"}),l.a.createElement(f,{onClick:function(){return e.handleNavigationClick("stall-right")},buttonText:"Right"}),l.a.createElement("br",null),l.a.createElement(f,{onClick:function(){return e.handleNavigationClick("stall-down")},buttonText:"Down"}),l.a.createElement("br",null),l.a.createElement(f,{onClick:function(){return e.handleNavigationClick("stall-back")},buttonText:"Back"}),l.a.createElement("br",null),l.a.createElement(w,{userHex:this.userHex,occupantsByStall:this.props.occupantsByStall,channel:this.channel,myId:this.myId})))}}]),n}(a.PureComponent),S=n(11),B=n.n(S),M=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).pusher=e.pusher,a.id=e.id,a.presenceChannel=null,a.me=null,a.state={myStall:null,occupantsByStall:{},occupants:{count:0},userHex:"#ffffff",currentView:"stall-front"},a.max_occupancy=e.max,a.updateOccupants=a.updateOccupants.bind(Object(s.a)(a)),a.countOccupants=a.countOccupants.bind(Object(s.a)(a)),a.handleNavigationClick=a.handleNavigationClick.bind(Object(s.a)(a)),a.restartParallax=a.restartParallax.bind(Object(s.a)(a)),a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.presenceChannel=this.pusher.subscribe("presence-room-".concat(this.id)),this.presenceChannel.bind("pusher:subscription_succeeded",(function(){e.me=e.presenceChannel.members.me.id,e.setState((function(t){var n=0,a={},l=null;e.presenceChannel.members.each((function(t){t.info.isSpy||(a[n]=t.id,t.id===e.me&&(l=n),n++)}));return{myStall:l,occupantsByStall:a,userHex:"#"+Math.floor(16777215*parseInt(e.presenceChannel.members.me.id)).toString(16).slice(-6)}})),e.updateOccupants(e.presenceChannel.members)})),this.presenceChannel.bind("pusher:member_added",(function(t){e.setState((function(n){for(var a=Object.assign({},n.occupantsByStall),l=0;a[l]&&l<e.max_occupancy;)l++;return a[l]=t.id,{occupantsByStall:a}})),e.updateOccupants(e.presenceChannel.members)})),this.presenceChannel.bind("pusher:member_removed",(function(t){e.setState((function(n){for(var a=Object.assign({},n.occupantsByStall),l=0;a[l]!==t.id&&l<e.max_occupancy;)l++;return a[l]=null,{occupantsByStall:a}})),e.updateOccupants(e.presenceChannel.members),console.log("Stall.js: ".concat(t.id," left Stall ").concat(e.id))}))}},{key:"countOccupants",value:function(e){var t=0;return e.count>0&&e.each((function(e){e.info.isSpy||t++})),t}},{key:"restartParallax",value:function(){var e=document.getElementById("app");new B.a(e,{selector:".layer",pointerEvents:!0})}},{key:"updateOccupants",value:function(e){var t=this;this.setState({occupants:e},(function(){return t.props.onOccupancyChange(t.countOccupants(e),"room",t.id)}))}},{key:"handleNavigationClick",value:function(e){this.setState({currentView:e})}},{key:"render",value:function(){var e=this,t=l.a.createElement(C,{direction:"front",handleNavigationClick:this.handleNavigationClick},l.a.createElement(f,{onClick:function(){return e.handleNavigationClick("stall-front")},buttonText:"Front"}),l.a.createElement("br",null),l.a.createElement(f,{onClick:function(){return e.handleNavigationClick("stall-left")},buttonText:"Left"}),l.a.createElement("br",null),l.a.createElement(f,{onClick:function(){return e.handleNavigationClick("stall-right")},buttonText:"Right"}),l.a.createElement("br",null),l.a.createElement(f,{onClick:function(){return e.handleNavigationClick("stall-up")},buttonText:"Up"}),l.a.createElement("br",null),l.a.createElement(f,{onClick:function(){return e.handleNavigationClick("stall-down")},buttonText:"Down"}),l.a.createElement("br",null),l.a.createElement(f,{onClick:function(){return e.handleNavigationClick("stall-back")},buttonText:"Back"}),l.a.createElement("br",null));switch(this.state.currentView){case"stall-up":t=l.a.createElement(C,{direction:"up",handleNavigationClick:this.handleNavigationClick},l.a.createElement(f,{onClick:function(){return e.handleNavigationClick("stall-front")},buttonText:"Front"}),l.a.createElement("br",null),l.a.createElement(f,{onClick:function(){return e.handleNavigationClick("stall-left")},buttonText:"Left"}),l.a.createElement("br",null),l.a.createElement(f,{onClick:function(){return e.handleNavigationClick("stall-right")},buttonText:"Right"}),l.a.createElement("br",null),l.a.createElement(f,{onClick:function(){return e.handleNavigationClick("stall-up")},buttonText:"Up"}),l.a.createElement("br",null),l.a.createElement(f,{onClick:function(){return e.handleNavigationClick("stall-down")},buttonText:"Down"}),l.a.createElement("br",null),l.a.createElement(f,{onClick:function(){return e.handleNavigationClick("stall-back")},buttonText:"Back"}),l.a.createElement("br",null)),this.restartParallax();break;case"stall-left":t=l.a.createElement(C,{direction:"left",handleNavigationClick:this.handleNavigationClick},l.a.createElement(f,{onClick:function(){return e.handleNavigationClick("stall-front")},buttonText:"Front"}),l.a.createElement("br",null),l.a.createElement(f,{onClick:function(){return e.handleNavigationClick("stall-right")},buttonText:"Right"}),l.a.createElement("br",null),l.a.createElement(f,{onClick:function(){return e.handleNavigationClick("stall-up")},buttonText:"Up"}),l.a.createElement("br",null),l.a.createElement(f,{onClick:function(){return e.handleNavigationClick("stall-down")},buttonText:"Down"}),l.a.createElement("br",null),l.a.createElement(f,{onClick:function(){return e.handleNavigationClick("stall-back")},buttonText:"Back"}),l.a.createElement("br",null)),this.restartParallax();break;case"stall-right":t=l.a.createElement(T,{myId:this.me,occupantsByStall:this.state.occupantsByStall,channel:this.presenceChannel,userHex:this.state.userHex,handleNavigationClick:this.handleNavigationClick});break;case"stall-down":t=l.a.createElement(C,{direction:"down",handleNavigationClick:this.handleNavigationClick},l.a.createElement(f,{onClick:function(){return e.handleNavigationClick("stall-front")},buttonText:"Front"}),l.a.createElement("br",null),l.a.createElement(f,{onClick:function(){return e.handleNavigationClick("stall-left")},buttonText:"Left"}),l.a.createElement("br",null),l.a.createElement(f,{onClick:function(){return e.handleNavigationClick("stall-right")},buttonText:"Right"}),l.a.createElement("br",null),l.a.createElement(f,{onClick:function(){return e.handleNavigationClick("stall-up")},buttonText:"Up"}),l.a.createElement("br",null),l.a.createElement(f,{onClick:function(){return e.handleNavigationClick("stall-down")},buttonText:"Down"}),l.a.createElement("br",null),l.a.createElement(f,{onClick:function(){return e.handleNavigationClick("stall-back")},buttonText:"Back"}),l.a.createElement("br",null)),this.restartParallax();break;case"stall-back":t=l.a.createElement(C,{direction:"back",handleNavigationClick:this.handleNavigationClick},l.a.createElement(f,{onClick:function(){return e.handleNavigationClick("stall-front")},buttonText:"Front"}),l.a.createElement("br",null),l.a.createElement(f,{onClick:function(){return e.handleNavigationClick("stall-left")},buttonText:"Left"}),l.a.createElement("br",null),l.a.createElement(f,{onClick:function(){return e.handleNavigationClick("stall-right")},buttonText:"Right"}),l.a.createElement("br",null),l.a.createElement(f,{onClick:function(){return e.handleNavigationClick("stall-up")},buttonText:"Up"}),l.a.createElement("br",null),l.a.createElement(f,{onClick:function(){return e.handleNavigationClick("stall-down")},buttonText:"Down"}),l.a.createElement("br",null),l.a.createElement(f,{onClick:function(){return e.handleNavigationClick("stall-back")},buttonText:"Back"}),l.a.createElement("br",null)),this.restartParallax();break;case"stall-front":default:t=l.a.createElement(C,{direction:"front",handleNavigationClick:this.handleNavigationClick},l.a.createElement(f,{onClick:function(){return e.handleNavigationClick("stall-front")},buttonText:"Front"}),l.a.createElement("br",null),l.a.createElement(f,{onClick:function(){return e.handleNavigationClick("stall-left")},buttonText:"Left"}),l.a.createElement("br",null),l.a.createElement(f,{onClick:function(){return e.handleNavigationClick("stall-right")},buttonText:"Right"}),l.a.createElement("br",null),l.a.createElement(f,{onClick:function(){return e.handleNavigationClick("stall-up")},buttonText:"Up"}),l.a.createElement("br",null),l.a.createElement(f,{onClick:function(){return e.handleNavigationClick("stall-down")},buttonText:"Down"}),l.a.createElement("br",null),l.a.createElement(f,{onClick:function(){return e.handleNavigationClick("stall-back")},buttonText:"Back"}),l.a.createElement("br",null)),this.restartParallax()}return l.a.createElement("div",{id:"room",className:"view"},l.a.createElement("div",{className:"hide"},l.a.createElement("h2",null,"Room ",this.id,": ",this.countOccupants(this.state.occupants)," / ",this.max_occupancy)),t)}}]),n}(a.Component),_=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).state={currentView:"bathroom"},a.handleNavigationClick=a.handleNavigationClick.bind(Object(s.a)(a)),a}return Object(u.a)(n,[{key:"handleNavigationClick",value:function(e){"waiting"===e?this.props.onEnterWaiting():"bathroom"===e&&this.setState({currentView:"bathroom"})}},{key:"render",value:function(){var e=this,t=null;return"bathroom"===this.state.currentView&&(t=l.a.createElement("div",null,l.a.createElement(f,{onClick:function(){return e.handleNavigationClick("waiting")},buttonText:"Wait for Stall"}))),l.a.createElement("div",{id:this.state.currentView,className:"view layer","data-depth":"0.2"},l.a.createElement("div",{className:"content"},l.a.createElement("h2",null,this.state.currentView),t))}}]),n}(a.Component);n(53),n(54);v.a.config({path:".env"});var I=function(e){Object(h.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(o.a)(this,n),(a=t.call(this,e)).pusher=new p.a("93d5b6db6095187f5ef6",{cluster:"us2",encrypted:!0}),a.spy=new p.a("93d5b6db6095187f5ef6",{encrypted:!0,cluster:"us2",auth:{params:{isSpy:!0}}}),a.me=null,a.timeoutId=null,a.state={currentView:{type:"hallway",id:null},rooms:[],pusher_app_members:{count:0},inLine:0,message:""},a.max_occupancy=3,a.num_rooms=2,a.countMembers=a.countMembers.bind(Object(s.a)(a)),a.spyOn=a.spyOn.bind(Object(s.a)(a)),a.startInactivityCheck=a.startInactivityCheck.bind(Object(s.a)(a)),a.userActivityDetected=a.userActivityDetected.bind(Object(s.a)(a)),a.handleEnterBathroom=a.handleEnterBathroom.bind(Object(s.a)(a)),a.handleEnterWaiting=a.handleEnterWaiting.bind(Object(s.a)(a)),a.handleEnterRoom=a.handleEnterRoom.bind(Object(s.a)(a)),a.handleMouseMove=a.handleMouseMove.bind(Object(s.a)(a)),a.restartParallax=a.restartParallax.bind(Object(s.a)(a)),a.updateMemberCount=a.updateMemberCount.bind(Object(s.a)(a)),a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.restartParallax(),this.spyOn("presence-bathroom","waiting");for(var t=0;t<this.num_rooms;t++)this.spyOn("presence-room-".concat(t),"room");this.presenceChannel=this.pusher.subscribe("presence-app"),this.presenceChannel.bind("pusher:subscription_succeeded",(function(){e.me=e.presenceChannel.members.me.id,e.updateAppMembers(e.presenceChannel.members)})),this.presenceChannel.bind("pusher:member_added",(function(){e.updateAppMembers(e.presenceChannel.members)})),this.presenceChannel.bind("pusher:member_removed",(function(t){e.updateAppMembers(e.presenceChannel.members)}))}},{key:"componentWillUnmount",value:function(){this.pusher.unsubscribe("presence-app")}},{key:"countMembers",value:function(e){var t=0;return e.members.each((function(e){e.info.isSpy||(console.log("user: "+e.id),t++)})),t}},{key:"restartParallax",value:function(){var e=document.getElementById("app");new B.a(e,{selector:".layer",pointerEvents:!0})}},{key:"updateMemberCount",value:function(e,t,n){if("room"===t){var a=Array.from(this.state.rooms);a[n]={id:n,occupants:e},this.setState((function(e){return{rooms:a}}))}else"waiting"===t&&this.setState((function(t){return{inLine:e}}))}},{key:"updateAppMembers",value:function(e){this.setState({pusher_app_members:e})}},{key:"spyOn",value:function(e,t){var n=this,a=this.spy.subscribe(e),l=null;"room"===t&&(l=e.split("-").pop()),a.bind("pusher:subscription_succeeded",(function(){n.updateMemberCount(n.countMembers(a),t,l)})),a.bind("pusher:member_added",(function(){n.updateMemberCount(n.countMembers(a),t,l)})),a.bind("pusher:member_removed",(function(){n.updateMemberCount(n.countMembers(a),t,l)}))}},{key:"startInactivityCheck",value:function(){var e=this;this.timeoutId=window.setTimeout((function(){e.pusher.disconnect()}),3e5)}},{key:"userActivityDetected",value:function(){null!==this.timeoutId&&window.clearTimeout(this.timeoutId),"disconnected"===this.pusher.connection.state&&(alert("You've been ushered out of the bathroom for taking so long! Please line up again to re-enter the bathroom."),window.location.reload()),this.startInactivityCheck()}},{key:"handleEnterBathroom",value:function(e){var t=this;this.setState((function(e){return{currentView:{type:"bathroom",id:null}}}),(function(){t.restartParallax()}))}},{key:"handleEnterWaiting",value:function(e){var t=this;this.setState((function(e){return{currentView:{type:"waiting",id:null}}}),(function(){t.restartParallax()}))}},{key:"handleEnterRoom",value:function(e){var t=this,n=!1;this.pusher.unsubscribe("presence-bathroom");for(var a=function(){r=Object(i.a)({},t.state.rooms[l]);var e=l;r.occupants<t.max_occupancy?(t.updateMemberCount(r.occupants+1,"room",l),t.setState((function(t){return{currentView:{type:"room",id:e}}}),(function(){t.restartParallax()})),n=!0):console.log("Room ".concat(l," full"))},l=0;!n&&l<this.state.rooms.length;l++){var r;a()}n||alert("no vacant rooms available!")}},{key:"handleMouseMove",value:function(){this.userActivityDetected()}},{key:"render",value:function(){var e=this,t=null;console.log("running in ".concat("production"," mode"));var n=this.state.rooms.map((function(t){return l.a.createElement("li",{key:t.id.toString()},l.a.createElement("strong",null,"Room ",t.id,":")," ",t.occupants,"/",e.max_occupancy)})),a=l.a.createElement(k,{onEnterBathroom:this.handleEnterBathroom});return"bathroom"===this.state.currentView.type?a=l.a.createElement(_,{onEnterWaiting:this.handleEnterWaiting}):"waiting"===this.state.currentView.type&&(a=l.a.createElement(E,{onEnterRoom:this.handleEnterRoom,pusher:this.pusher,onOccupancyChange:this.updateMemberCount})),"room"===this.state.currentView.type&&(a=l.a.createElement(M,{id:this.state.currentView.id,pusher:this.pusher,max:this.max_occupancy,onOccupancyChange:this.updateMemberCount})),l.a.createElement("div",{id:"app",onMouseMove:this.handleMouseMove},l.a.createElement("div",{id:"debug-console",className:t},l.a.createElement("div",null,"THE APP IS RUNNING IN ",l.a.createElement("strong",null,"production")," MODE",l.a.createElement("br",null),"this box is for development purposes only"),l.a.createElement("div",null,l.a.createElement("div",null,"Number of Rooms: ",this.num_rooms),l.a.createElement("div",null,l.a.createElement("strong",null,"Current Users:")," ",this.state.pusher_app_members.count),l.a.createElement("div",null,l.a.createElement("strong",null,"In line:")," ",this.state.inLine)),l.a.createElement("div",null,l.a.createElement("strong",null,"Rooms:"),n)),a)}}]),n}(a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(l.a.createElement(l.a.StrictMode,null,l.a.createElement(I,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[28,1,2]]]);
//# sourceMappingURL=main.739b8be8.chunk.js.map