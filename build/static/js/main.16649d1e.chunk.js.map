{"version":3,"sources":["constants.js","Loading.js","Background.js","Button.js","Hallway.js","Audio.js","WaitingRoom.js","Stall.js","Mirrors.js","Hotspots.js","Chatlist.js","Chatbox.js","BigPhone.js","Graffiti.js","Phone.js","BigNote.js","Note.js","Room.js","App.js","serviceWorker.js","index.js"],"names":["restartParallax","selector","container","document","getElementById","Parallax","pointerEvents","scrollToBottom","element","scrollIntoView","behavior","PSEUDONYMS","CONVOS","time","from","message","STATICURL","GRAFFITI","dotenv","config","path","loadingImg","constants","Loading","props","state","loaded","console","log","this","setState","onLoad","images","className","src","PureComponent","Background","style","backgroundImage","imgSrc","responsive","reponsive","classes","data-depth","id","children","Button","position","top","left","width","noAnimate","animate","onClick","text","altText","enterButton","audioGuideButton","backgroundImgSrc","Hallway","handleEnterBathroomClick","bind","handleAudioDescriptionClick","e","onEnterBathroom","alert","Audio","autoplay","play","hidden","display","loop","audioSrc","enterStallButton","vacancyAudioSrc","animatedBackground","WaitingRoom","enterMessage","positioningCss","backgroundImg","queuePosition","inLineTotal","currentVacancies","handleEnterRoomClick","backgroundAudio","Stall","handleNavigationClick","target","stallId","direction","CCALogo","Mirrors","credits","alt","href","Hotspots","Chatlist","stallMap","myHex","getColorStyle","hex","color","chats","map","chat","key","userhex","userName","Component","notificationSound","Chatbox","channel","myId","members","me","userHex","handleTextChange","data","test","messagesEnd","keyCode","ENDPOINT","payload","channel_name","name","userId","axios","post","value","float","clear","ref","el","type","placeholder","onChange","onKeyDown","bigPhoneImg","BigPhone","conversation","Math","floor","random","length","sendMessage","sentMessages","newMessages","Array","push","prevState","convoMsgs","messageItem","sent","sentMessage","dataDepth","stopPropagation","nativeEvent","stopImmediatePropagation","Phone","animatePhone","handleClick","phoneVibe","showPhone","setInterval","clearInterval","animationName","Promise","resolve","reject","node","querySelector","classList","add","addEventListener","handleAnimationEnd","remove","removeEventListener","phoneBottom","getElementsByClassName","zoomOutPhone","zoomInPhone","Graffiti","painting","x","y","canvas","noteImg","ctx","newGraffiti","downHandler","upHandler","moveHandler","getPosition","resizeCanvas","isCanvasBlank","loadedCanvas","getContext","window","get","then","res","canvasImage","catch","err","toDataURL","size","height","setAttribute","loadedGraffiti","cssText","rect","getBoundingClientRect","originalEvent","clientX","clientY","preventDefault","beginPath","lineWidth","lineCap","strokeStyle","moveTo","lineTo","stroke","context","Uint32Array","getImageData","buffer","some","loadedCanvasImage","bigNoteImg","BigNote","Note","animateNote","noteVibe","showNote","zoomOutNote","zoomInNote","navUpButton","navDownButton","navLeftButton","navRightButton","navBackButton","navExitButton","chatNotification","flushAudio","bgAudioSrc","Room","pusher","presenceChannel","newAlert","occupants","count","currentView","max_occupancy","max","updateOccupants","countOccupants","handleFlush","subscribe","currentState","parseInt","toString","slice","member","each","info","isSpy","onOccupancyChange","chatroomStall","phoneView","stallFront","exit","onExit","newMsg","seeSpider","App","process","Pusher","cluster","encrypted","spy","auth","params","timeoutId","rooms","pusher_app_members","ahead","inLine","appChannel","queueChannel","countMembers","spyOn","startInactivityCheck","userActivityDetected","handleExitStall","handleEnterHallway","handleEnterWaiting","handleEnterRoom","handleMouseMove","updateAppMembers","updateMemberCount","updateQueuePosition","roomsCopy","i","unsubscribe","num","location","roomId","channelName","split","pop","setTimeout","disconnect","trueOccupants","visitor","sorted","forEach","sort","a","b","entry_time","indexOf","clearTimeout","connection","reload","confirm","roomEntered","currentRoom","hide","room","vacancies","reduce","onMouseMove","undefined","Boolean","hostname","match","ReactDOM","render","StrictMode","navigator","serviceWorker","ready","registration","unregister","error"],"mappings":"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","file":"static/js/main.16649d1e.chunk.js","sourcesContent":["import Parallax from 'parallax-js';\n\nexport function restartParallax(selector) {\n  var container = document.getElementById('app');\n  var parallaxInstance = new Parallax(container, {\n    selector: selector,\n    pointerEvents: true,\n  });\n}\n\nexport function scrollToBottom(element) {\n    element.scrollIntoView({ behavior: \"smooth\" });\n  }\n\nexport function sortByEntryTime(occupants) {\n  let sorted = []\n  occupants.forEach((member) => {\n    sorted.push(member);\n  });\n  return sorted.sort((a,b) => {\n    if (parseInt(a.info.entry_time) < parseInt(b.info.entry_time)) { return -1 }\n    if (parseInt(a.info.entry_time) > parseInt(b.info.entry_time)) { return 1 }\n    return 0\n  });\n}\n\nexport const PSEUDONYMS = [\n  'someone',\n  'somebody',\n  'a stallmate',\n  'a person',\n  'another person',\n  'person in next stall',\n  'some person',\n];\n\nexport const CONVOS = [\n  [\n    {\n      time: '11:34 AM',\n      from: 'Mom',\n      message: 'I need you to help me write a complaint letter for work',\n    },\n    {\n      time: '11:34 AM',\n      from: 'Mom',\n      message: 'I will call you tonight',\n    },\n    {\n      time: '11:35 AM',\n      from: 'Mom',\n      message: 'And what is the password for the tablet?',\n    },\n    {\n      time: '11:35 AM',\n      from: 'Mom',\n      message: 'Love, Mom 🐶',\n    },\n  ],\n  [\n    {\n      time: '3 days ago',\n      from: 'Me',\n      message: 'Can you please send someone to take a look at our fridge? The freezer isn’t working, we have it on the coldest setting but it’s not cold. We’ve had to throw out the food we had in there. Thanks.',\n    },\n    {\n      time: '1 day ago',\n      from: 'Me',\n      message: 'Hello, I’m writing again re. our fridge. It’s broken and the settings don’t work. Can you please let me know when you are going to send someone to look at it?',\n    },\n    {\n      time: '1:58 PM',\n      from: 'Landlord',\n      message: 'THE FRIDGE IS NEW SO THERE SHOULDN’T BE ANY ISSUE WITH IT. HAVE YOU TRIED CHANGING IT TO THE COLDEST SETTING?',\n    },\n  ],\n  [\n    {\n      time: '10:24 AM',\n      from: 'Me', \n      message: \"I had a really nice time with you!\"\n    },\n    {\n      time: '10:45 AM',\n      from: 'Sky',\n      message: 'yes me too!!'\n    },\n    {\n      time: '11:20 AM',\n      from: 'Sky',\n      message: 'When can I kiss u again?!'\n    },\n  ],\n  [\n    {\n      time: '11:30 PM',\n      from: 'Lily',\n      message: \"Hello! Is 6pm still good to meet tonight?\",\n    },\n    {\n      time: '12:01 PM',\n      from: 'Me',\n      message: \"hey sorry I don’t think I can do tonite anymore… I had a really long day, I want to go home and lie down. Can we do tm?\",\n    },\n    {\n      time: '12:40 PM',\n      from: 'Lily',\n      message: \"Oh no, I’m sorry to hear! I’m busy tomorrow and the rest of this week though, tonight is the only time I have free 😥\",\n    },\n  ],\n];\n\nexport const MAX_OCCUPANCY = 3;\nexport const NUM_ROOMS = 5;\nexport const TIMEOUT = 4 * 60 * 1000;\nexport const STATICURL='https://virtual-bathroom-assets.s3.us-east-2.amazonaws.com';\n\nexport const GRAFFITI = [\n  `${STATICURL}/canvas-uploads/brain.png`,\n  `${STATICURL}/canvas-uploads/tomatoes.png`,\n  `${STATICURL}/canvas-uploads/listening.png`,\n  `${STATICURL}/canvas-uploads/looking.png`,\n  `${STATICURL}/canvas-uploads/nowme.png`,\n  `${STATICURL}/canvas-uploads/toiletpaper.png`,\n];","import React, { PureComponent } from 'react';\nimport * as constants from './constants';\nimport dotenv from 'dotenv';\n\ndotenv.config({ path: '.env' });\n\nconst loadingImg = `${constants.STATICURL}/loading.png`;\n\nclass Loading extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.state = {\n      loaded: false,\n    }\n  }\n\n  componentDidMount() {\n    console.log('Loading complete');\n    this.setState({\n      loaded: true, // images already rendered in first pass of render()\n    });\n  }\n\n  componentDidUpdate() {\n    if (this.state.loaded) {\n      this.props.onLoad();\n    }\n  }\n\n  render() {\n    let images = [];\n    if (!this.state.loaded) {\n      console.log('Loading...');\n      // preload most images\n    }\n    return (\n      <div className=\"loading\">\n        <div>\n          <img src={loadingImg} className=\"rotating\" />\n          {images}\n        </div>\n      </div>\n    );\n\n  }\n}\n\nexport default Loading;","import React, { PureComponent } from 'react';\n\nclass Background extends PureComponent {\n  render() {\n    const style = {\n      backgroundImage: `url('${this.props.imgSrc}')`\n    }\n    var responsive = this.props.reponsive ? 'bg-div--responsive' : 'bg-div';\n    const classes = `content ${responsive}`;\n    return (\n      <div className=\"view layer\" data-depth=\"0.1\">\n        <div id={this.props.id} className={classes} style={style}>\n          {this.props.children}\n        </div>\n      </div>\n    );\n\n  }\n}\n\nexport default Background;","import React, { PureComponent } from 'react';\n\nclass Button extends PureComponent {\n  render() {\n    const { top, left, width } = this.props;\n    const style = {\n      position: 'absolute',\n      top: top,\n      left: left,\n      width: width,\n    }\n    var className = this.props.className || \"\";\n    className += \" nav-image\";\n    if (!this.props.noAnimate && this.props.animate === 'pulse') {\n      className += \" animate__animated animate__infinite animate__slower animate__pulse\"\n    }\n    else if (!this.props.noAnimate && this.props.animate === 'shake') {\n      className += \" animate__animated animate__infinite animate__delay-3s animate__headShake\"\n    }\n    if (this.props.imgSrc) {\n      return (\n        <img className={className} src={this.props.imgSrc} onClick={this.props.onClick} text={this.props.altText} style={style} />\n      );\n    }\n    else {\n      return (\n        <div className={className} onClick={this.props.onClick} style={style}>{this.props.children}</div>\n      );\n    }\n  }\n\n}\n\nexport default Button;","import React, { PureComponent } from 'react';\nimport Background from './Background';\nimport Button from './Button';\nimport * as constants from './constants';\nimport dotenv from 'dotenv';\n\ndotenv.config({ path: '.env' });\n\nconst enterButton = `${constants.STATICURL}/actions/perspective-round-arrow-up.png`;\nconst audioGuideButton = `${constants.STATICURL}/actions/2_audio-guide.png`;\nconst backgroundImgSrc = `${constants.STATICURL}/images/bg-hallway.jpg`;\n\nclass Hallway extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.handleEnterBathroomClick = this.handleEnterBathroomClick.bind(this);\n    this.handleAudioDescriptionClick = this.handleAudioDescriptionClick.bind(this);\n  }\n\n  handleEnterBathroomClick(e) {\n    this.props.onEnterBathroom(e);\n  }\n\n  handleAudioDescriptionClick(e) {\n    alert('sorry! not yet implemented T__T');\n  }\n\n  render() {\n    return (\n      <Background id=\"hallway\" imgSrc={backgroundImgSrc}>\n        <div className=\"hotspots layer\" data-depth=\"0.1\">\n          <Button onClick={this.handleEnterBathroomClick} altText=\"Enter Bathroom\" imgSrc={enterButton} top=\"75vh\" left=\"51vw\" width=\"9vw\" className=\"arrow--enter-bathroom blue-glow\" />\n          <Button onClick={this.handleAudioDescriptionClick} noAnimate={true} altText=\"Audio Guide\" imgSrc={audioGuideButton} width=\"200px\" top=\"93vh\" left=\"12vw\" />\n        </div>\n      </Background>\n    );\n  }\n\n}\n\nexport default Hallway;","import React, { PureComponent } from 'react';\n\nclass Audio extends PureComponent {\n  componentDidMount() {\n    if (this.props.autoplay) {\n      const audioElement = document.getElementById(this.props.id);\n      audioElement.play();\n    }\n  }\n  render() {\n    const { autoplay } = this.props;\n    var style = {};\n    if (this.props.hidden) {\n      style = {\n        display: 'none',\n      }\n    }\n    return (\n      <audio id={this.props.id} className=\"audio\" style={style} loop={this.props.loop}>\n        <source src={this.props.audioSrc}></source>\n      </audio>\n    );\n  }\n\n}\n\nexport default Audio;","import React, { PureComponent } from 'react';\nimport Background from './Background';\nimport Button from './Button';\nimport Audio from './Audio';\n\nimport * as constants from './constants';\nimport dotenv from 'dotenv';\n\ndotenv.config({ path: '.env' });\n\nconst enterStallButton = `${constants.STATICURL}/actions/perspective-round-arrow-up.png`;\n// const enterStallButton = `${constants.STATICURL}/actions/3_enter-stall.png`;\nconst audioSrc = `${constants.STATICURL}/sounds/outside.mp3`;\nconst backgroundImgSrc = `${constants.STATICURL}/images/bg-waiting-closed.jpg`;\nconst vacancyAudioSrc = `${constants.STATICURL}/sounds/eventually.mp3`;\nconst animatedBackground = `${constants.STATICURL}/images/bg-waiting-opening.gif`;\n\nclass WaitingRoom extends PureComponent {\n  render() {\n    const positioningCss = {\n      top: \"86vh\",\n      left: \"58vw\",\n      position: \"absolute\",\n    };\n\n    let enterMessage;\n    let backgroundImg = backgroundImgSrc;\n    if (this.props.queuePosition > 0 || this.props.queuePosition === 0) {\n      console.log(`Currently ${this.props.queuePosition}/${this.props.inLineTotal}`);\n      if (this.props.queuePosition > 2) {\n        enterMessage = <div className=\"please-wait neon\">&nbsp;&nbsp;Sorry, all stalls are occupied right now.<br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;There are {this.props.queuePosition} ahead of you in line. Please wait.</div>;\n      }\n      else { // == 0\n        if (this.props.currentVacancies > 0) {\n          backgroundImg = animatedBackground;\n          enterMessage = <>\n              <Audio id=\"enter-sound\" audioSrc={vacancyAudioSrc} hidden=\"true\" autoplay=\"true\" />\n              <Button className=\"arrow--enter-stall blue-glow\" onClick={this.props.handleEnterRoomClick} altText=\"Enter Stall\" imgSrc={enterStallButton} top={positioningCss.top} left={positioningCss.left}  />\n            </>;\n        }\n        else {\n          enterMessage = <div className=\"please-wait neon\">&nbsp;&nbsp;Sorry, all stalls are occupied right now.<br/><br/><br/>&nbsp;&nbsp;&nbsp;&nbsp;It looks like it will be your turn soon, though. Please wait.</div>;\n        }\n      }\n    }\n    else {\n      enterMessage = <div className=\"please-wait neon\" style={positioningCss}>please wait...</div>;\n    }\n    \n    const backgroundAudio = <Audio id=\"background-audio\" audioSrc={audioSrc} hidden=\"true\" autoplay=\"true\" loop={true} />;\n    return (\n      <Background id=\"waiting\" imgSrc={backgroundImg}>\n        {backgroundAudio}\n        <div className=\"hotspots\">\n          {enterMessage}\n        </div>\n      </Background>\n    );\n  }\n\n}\n\nexport default WaitingRoom;","import React, { PureComponent } from 'react';\n// import Button from './Button';\n\nexport default class Stall extends PureComponent {\n  constructor(props) {\n    super(props);\n    this.handleNavigationClick = this.handleNavigationClick.bind(this);\n  }\n\n  // componentDidMount() {\n  //   console.log(`waiting room mounted`);\n  // }\n\n  handleNavigationClick(target) {\n    this.props.handleNavigationClick(target);\n  }\n\n  render() {\n    const stallId = `stall-${this.props.direction}`;\n    const classes = \"layer \" + this.props.className;\n    return (     \n      <div id={stallId} className={classes} data-depth=\"0.2\">\n        <div className=\"content\">\n            {this.props.children}\n        </div>\n      </div>\n    );\n  }\n\n}\n","import React, { PureComponent } from 'react';\nimport Background from './Background';\n\nimport * as constants from './constants';\nimport dotenv from 'dotenv';\n\ndotenv.config({ path: '.env' });\n\nconst CCALogo = `${constants.STATICURL}/CCA_RGB_colour_e.svg`;\n\nconst backgroundImgSrc = `${constants.STATICURL}/images/bg-mirrors.jpg`;\n\nclass Mirrors extends PureComponent {\n  // constructor(props) {\n  //   super(props);\n  //   // this.handleNavigationClick = this.handleNavigationClick.bind(this);\n  // }\n\n  // handleNavigationClick(target) {\n  //   if (target === 'waiting') {\n  //     this.props.onEnterWaiting();\n  //   }\n  //   else if (target === 'bathroom') {\n  //     this.setState({ currentView: 'bathroom' });\n  //   }\n  // }\n  // \n\n  render() {\n    var credits = <>\n              <div className=\"col-1\">\n                <h1>MAKE-BELIEVE BATHROOM</h1>\n                <p>\n                  Created by Amy Lam<br/>\n                  Web developer: Naomi Cui<br/>\n                  3D renderings & animations: Emerson Maxwell<br/>\n                  Soundscape: Vic Cheong<br/>\n                  Graffiti: Haeahn Kwon, Caley Feeney<br/>\n                  Audio descriptive guide: Aliya Pabani\n                </p>\n                <p>\n                  Curator: Jenn Jackson<br/>\n                  With contributions from Jon McCurley\n                </p>\n                <p>\n                  We acknowledge the support of the Canada Council for the Arts<br/>\n                  <img className=\"cca-logo\" src={CCALogo} alt=\"Canada Council for the Arts\" />\n                </p>\n              </div>\n              <div className=\"col-2\">\n                <h2>TOILETS FOR ALL</h2>\n                <p>Download and share window stickers created by the Toronto Bathroom Codes project. These stickers advocate for businesses and other organizations to allow their bathrooms to be used by anyone.</p>\n                <p><a href=\"/freeourpee\">Pee for free, free to pee.</a></p>\n                <h2>SUBMIT A POSTER</h2>\n                <p>To post a poster or public notice to the Make-Believe Bathroom, please send a PNG file to <strong>xxemail@gmail.com</strong></p>\n              </div>\n              <div>\n                <a href=\"/\" className=\"neon\">Try the Make-Believe Bathroom Experience Again?</a>\n              </div>\n            </>\n    return (\n      <Background id=\"mirrors\" imgSrc={backgroundImgSrc}>\n        <div className=\"layer\" data-depth=\"0.4\">\n          <div className=\"mirrors-content\">\n          {credits}\n          </div>\n        </div>\n      </Background>\n    );\n  }\n\n}\n\nexport default Mirrors;","import React, { PureComponent } from 'react';\n\nexport default class Hotspots extends PureComponent {\n  // constructor(props) { \n  //   super(props);\n  // }\n\n  componentDidMount() {\n  }\n\n  componentDidUpdate() {\n  }\n\n  render() {\n    return (\n      <div className=\"hotspots layer\" data-depth=\"0.1\">{this.props.children}</div>\n    );\n  }\n\n}\n\n\n","import React, { Component } from 'react';\n\nexport default class Chatlist extends Component {\n  constructor(props) {\n    super(props);\n    this.stallMap = props.stallMap;\n    this.myHex = props.myHex;\n    this.getColorStyle = this.getColorStyle.bind(this);\n  }\n\n  getColorStyle(hex) {\n    return { color: hex }\n  }\n\n  render() {\n    const chats = this.props.chats.map(chat => \n      <div key={chat.id} className=\"row show-grid\">\n        <div className=\"col-xs-12\">\n          <div className={chat.userhex === this.myHex ? 'chatMessage self' : 'chatMessage' }>\n            <div className=\"box\">\n              <p className=\"user\">\n                <strong style={this.getColorStyle(chat.userhex)}>{ chat.userhex === this.myHex ? 'you' : chat.userName }</strong>\n              </p>\n              <p className=\"message\">{chat.message}</p>\n            </div>\n          </div>\n          </div>\n        </div>\n      );\n\n    return (\n      <div id=\"chatlist\">\n        <ul>\n          {chats}\n        </ul>\n      </div>\n    );\n  }\n\n}\n","import React, { Component } from 'react';\nimport Chatlist from './Chatlist';\nimport Audio from './Audio';\nimport axios from 'axios';\nimport dotenv from 'dotenv';\n\nimport * as constants from './constants';\n\ndotenv.config({ path: '.env' });\n\nconst notificationSound = `${constants.STATICURL}/sounds/clearly.mp3`;\n\nexport default class Chatbox extends Component {\n  constructor(props) {\n    super(props);\n    this.channel = props.channel;\n    this.myId = props.channel.members.me.id;\n    this.userHex = props.userHex;\n    this.userName = props.userName;\n    this.handleTextChange = this.handleTextChange.bind(this);\n    this.state = {\n      text: '',\n      chats: [],\n    }\n  }\n\n  componentDidMount() {\n    this.channel.bind('message', data => {\n      this.setState({ chats: [...this.state.chats, data], test: '' });\n    });\n  }\n\n  componentDidUpdate() {\n    constants.scrollToBottom(this.messagesEnd);\n  }\n\n  handleTextChange(e) {\n    if (e.keyCode === 13) { // hit enter on keyboard\n      const payload = {\n        channel_name: this.channel.name,\n        userId: this.myId,\n        userName: this.userName,\n        userhex: this.userHex,\n        message: this.state.text,\n      };\n      var ENDPOINT;\n      if (process.env.NODE_ENV === 'development' ) {\n        ENDPOINT = 'http://localhost:5000/'\n      }\n      else {\n        ENDPOINT = 'https://virtual-bathroom.herokuapp.com/'\n      }\n      axios.post(ENDPOINT + 'message', payload);\n      this.setState({ text: '' });\n      constants.scrollToBottom(this.messagesEnd);\n    }\n    else {\n      this.setState({ text: e.target.value });\n    }\n  }\n\n  render() {\n    return (\n      <div id=\"chatbox\" className=\"component-box\">\n        <Audio id=\"notification-sound\" audioSrc={notificationSound} hidden=\"true\" />\n        <div className=\"chatlist-container\">\n          <Chatlist chats={this.state.chats} myHex={this.userHex} />\n          <div style={{ float:\"left\", clear: \"both\" }}\n             ref={(el) => { this.messagesEnd = el; }}>\n          </div>\n        </div>\n        <input\n          type=\"text\"\n          value={this.state.text}\n          placeholder=\"chat here...\"\n          onChange={this.handleTextChange}\n          onKeyDown={this.handleTextChange}\n          />\n      </div>\n    );\n  }\n\n}\n","import React, { PureComponent } from 'react';\n// import Button from './Button';\nimport Parallax from 'parallax-js';\n\nimport * as constants from './constants';\nimport dotenv from 'dotenv';\n\ndotenv.config({ path: '.env' });\n\nconst bigPhoneImg = `${constants.STATICURL}/images/closeup-phone.png`;\n\nexport default class BigPhone extends PureComponent {\n  constructor(props) { \n    super(props);\n    this.conversation = constants.CONVOS[Math.floor(Math.random() * Math.floor(constants.CONVOS.length))];\n    this.handleTextChange = this.handleTextChange.bind(this);\n    this.sendMessage = this.sendMessage.bind(this);\n    this.state = {\n      text: '',\n      sentMessages: [],\n    }\n  }\n\n  componentDidMount() {\n    constants.scrollToBottom(this.messagesEnd);\n  }\n\n  componentDidUpdate() {\n    constants.scrollToBottom(this.messagesEnd);\n  }\n\n  handleTextChange(e) {\n    if (e.keyCode === 13) { // hit enter on keyboard\n      this.sendMessage();   \n    }\n    else {\n      this.setState({ text: e.target.value });\n    }\n  }\n\n  sendMessage() {\n    if (this.state.text !== '') {\n      let newMessages = Array.from(this.state.sentMessages);\n      newMessages.push(this.state.text);\n      this.setState((prevState) => {\n        return { \n          ...prevState, sentMessages: newMessages, text: '', \n        }\n      }, () => { \n        constants.scrollToBottom(this.messagesEnd);\n      });\n    }   \n  }\n\n  render() {\n    let convoMsgs = this.conversation.map(messageItem => \n      <div className={messageItem.from === 'Me' ? 'phone-msg self' : 'phone-msg'}>\n        <div className=\"user\">\n          <strong className={messageItem.from === 'Me' ? 'hide' : ''}>{messageItem.from}</strong>\n          <span className=\"time\">{messageItem.time}</span>\n        </div>\n        <div className=\"box\">\n          <p className=\"message\">\n            {messageItem.message}\n          </p>\n        </div>\n      </div>\n      );\n    let sent = null;\n    if (this.state.sentMessages.length > 0) {\n      sent = this.state.sentMessages.map((sentMessage) =>  \n        <div className=\"phone-msg self\">\n          <div className=\"user\">\n            <strong className=\"hide\">Me</strong>\n            <span className=\"time\">just now</span>\n          </div>\n          <div className=\"box\">\n            <p className=\"message\">\n              {sentMessage}\n            </p>\n          </div>\n        </div>\n      );\n    }\n    return (\n      <div id=\"big-phone\" className={this.props.className} data-depth={this.props.dataDepth} onClick={this.props.onClick}>\n        <img className=\"phone-img\" src={bigPhoneImg} />\n        <div className=\"phone-convo\">\n          <div className=\"phone-messages\">\n            {convoMsgs}\n            {sent}\n            <div className=\"phone-messages-bottom\" style={{ float:\"left\", clear: \"both\" }}\n               ref={(el) => { this.messagesEnd = el; }}>\n            </div>\n          </div>\n        <div className=\"enter-message\" onClick={(e) => {e.stopPropagation(); e.nativeEvent.stopImmediatePropagation();}}>\n          <input\n            type=\"text\"\n            value={this.state.text}\n            placeholder=\"\"\n            onChange={this.handleTextChange}\n            onKeyDown={this.handleTextChange}\n            />\n          <div className=\"send-button\" onClick={this.sendMessage}></div>\n        </div>\n        </div>\n      </div>\n    );\n  }\n\n}\n","import React, { PureComponent } from 'react';\nimport Button from './Button';\n\nimport * as constants from './constants';\n\nimport axios from 'axios';\nimport dotenv from 'dotenv';\ndotenv.config({ path: '.env' });\n\nvar ENDPOINT;\nif (process.env.NODE_ENV === 'development' ) {\n  ENDPOINT = 'http://localhost:5000/'\n}\nelse {\n  ENDPOINT = 'https://virtual-bathroom.herokuapp.com/'\n}\n\nexport default class Graffiti extends PureComponent {\n  constructor(props) { \n    super(props);\n    this.painting = false;\n    this.position = { x: 0, y: 0 };\n    this.canvas = null;\n    this.noteImg = null;\n    this.ctx = null;\n    this.newGraffiti = this.newGraffiti.bind(this);\n    this.downHandler = this.downHandler.bind(this);\n    this.upHandler = this.upHandler.bind(this);\n    this.moveHandler = this.moveHandler.bind(this);\n    this.getPosition = this.getPosition.bind(this);\n    this.resizeCanvas = this.resizeCanvas.bind(this);\n    this.isCanvasBlank = this.isCanvasBlank.bind(this);\n    this.state = {\n      noteImg: null,\n      loaded: false,\n      loadedCanvas: null,\n      newGraffiti: false,\n    }\n  }\n\n  componentDidMount() {\n    this.canvas = document.getElementById(this.props.id);\n\n    if (this.canvas.getContext) {\n      this.ctx = this.canvas.getContext('2d');\n\n      this.canvas.addEventListener('mousedown', this.downHandler);\n      this.canvas.addEventListener('mousemove', this.moveHandler);\n      this.canvas.addEventListener('mouseup', this.upHandler);\n    }\n\n    window.addEventListener('resize', this.resizeCanvas);\n\n    var loadedCanvas;\n    axios.get(`${ENDPOINT}graffiti`)\n      .then((res) => {\n        console.log(res);\n        if (res.data.length > 0) {\n          loadedCanvas = res.data[Math.floor(Math.random() * res.data.length)].canvasImage;\n        }\n        else {\n          console.log(constants.GRAFFITI);\n          loadedCanvas = constants.GRAFFITI[Math.floor(Math.random() * constants.GRAFFITI.length)];\n          console.log(loadedCanvas);\n        }\n        this.setState({ \n          noteImg: document.querySelector('img.note-img'), \n          loaded: true, \n          loadedCanvas: loadedCanvas,\n        }, () => {this.resizeCanvas();});\n      })\n      .catch((err) => { \n        console.log(err); \n      });\n  }\n\n  componentDidUpdate() {\n    this.resizeCanvas();\n  }\n\n  componentWillUnmount() {\n    console.log('unmounting canvas');\n    console.log(this.canvas);\n    console.log(this.isCanvasBlank(this.canvas));\n    if (!this.isCanvasBlank(this.canvas)) {\n      var canvasImage = this.canvas.toDataURL();\n      console.log(canvasImage.length);\n\n      axios.post(`${ENDPOINT}draw`, {\n        canvasImage: canvasImage,\n      })\n      .then((res) => {\n        console.log(res);\n      })\n      .catch((err) => {\n        console.log(err);\n      });\n    }\n  }\n\n  resizeCanvas() {\n    if (this.canvas && this.state.noteImg) {\n      var size = { width: this.state.noteImg.width * 0.8 , height: this.state.noteImg.height * 0.9 }\n      this.canvas.setAttribute('width', size.width );\n      this.canvas.setAttribute('height', size.height );\n      let loadedGraffiti = document.querySelector('img.loaded-graffiti');\n      if (loadedGraffiti) {\n        loadedGraffiti.style.cssText = `width:${size.width}px;height:${size.height}px`;\n      }\n    }\n  }\n\n  getPosition(e) {\n    if (this.canvas) {\n      var rect = this.canvas.getBoundingClientRect();\n\n      if (e.originalEvent) {\n        e = e.originalEvent;\n      }\n\n      this.position.x = e.clientX - rect.left;\n      this.position.y = e.clientY - rect.top;\n    }\n  }\n\n  downHandler(e) {\n    this.painting = true;\n    this.getPosition(e);\n    e.preventDefault();\n  }\n\n  upHandler(e) {\n    this.painting = false;\n    e.preventDefault();\n  }\n\n  moveHandler(e) {\n    if (this.painting && this.ctx) {\n      this.ctx.beginPath();\n      this.ctx.lineWidth = 2;\n      // Sets the end of the lines drawn \n      // to a round shape. \n      this.ctx.lineCap = 'round'; \n        \n      this.ctx.strokeStyle = `rgba(0,0,0,${Math.random()*0.2+0.4})`; \n          \n      // The cursor to start drawing \n      // moves to this coordinate \n      this.ctx.moveTo(this.position.x, this.position.y); \n       \n      // The position of the cursor \n      // gets updated as we move the \n      // mouse around. \n      this.getPosition(e); \n       \n      // A line is traced from start \n      // coordinate to this coordinate \n      this.ctx.lineTo(this.position.x , this.position.y); \n        \n      // Draws the line. \n      this.ctx.stroke(); \n    }\n  }\n\n  isCanvasBlank(canvas) {\n    const context = canvas.getContext('2d');\n    const pixelBuffer = new Uint32Array(\n      context.getImageData(0, 0, canvas.width, canvas.height).data.buffer\n    );\n\n    return !pixelBuffer.some(color => color !== 0);\n  }\n\n  newGraffiti(e) {\n    e.stopPropagation(); e.nativeEvent.stopImmediatePropagation();\n    this.setState({ newGraffiti: true, }, () => { this.resizeCanvas(); });\n  }\n\n  render() {\n    var loadedCanvasImage;\n    if (this.state.loadedCanvas) {\n      loadedCanvasImage = <img className={this.state.newGraffiti ? 'loaded-graffiti hide' : 'loaded-graffiti'} src={this.state.loadedCanvas} />;\n    }\n    return (\n      <>\n      {loadedCanvasImage}\n      <canvas id={this.props.id} className={this.props.className} onClick={(e) => {e.stopPropagation(); e.nativeEvent.stopImmediatePropagation();}}>\n      </canvas>\n      <Button className=\"new-graffiti neon\" onClick={this.newGraffiti}>\n        clear graffiti\n      </Button>\n      </>\n    );\n  }\n\n}\n","import React, { PureComponent } from 'react';\nimport BigPhone from './BigPhone';\nimport Parallax from 'parallax-js';\n\nimport * as constants from './constants';\n\nexport default class Phone extends PureComponent {\n  constructor(props) { \n    super(props);\n    this.classes = \"bg-layer\";\n    this.animatePhone = this.animatePhone.bind(this);\n    this.handleClick = this.handleClick.bind(this);\n    this.phoneVibe = null;\n    this.state = { showPhone: false, };\n  }\n\n  componentDidMount() {\n    this.phoneVibe = setInterval(() => {\n      this.animatePhone('#phone-layer', 'shakeX');\n    }, 3.5 * 1000);\n  }\n\n  componentDidUpdate() {\n    constants.restartParallax('.layer');\n    if (this.state.showPhone) {\n      this.animatePhone('#big-phone', 'rotateInUpLeft');\n    }\n    else {\n      this.phoneVibe = setInterval(() => {\n        this.animatePhone('#phone-layer', 'shakeX');\n      }, 3.5 * 1000);\n    }\n  }\n\n  componentWillUnmount() {\n    // console.log('unmounting Phone.js');\n    clearInterval(this.phoneVibe);\n  }\n\n  animatePhone(element, animationName) {\n    new Promise((resolve, reject) => {\n      const node = document.querySelector(element);\n      node.classList.add('animate__animated', `animate__${animationName}`);\n\n      function handleAnimationEnd() {\n        node.classList.remove('animate__animated', `animate__${animationName}`);\n        node.removeEventListener('animationend', handleAnimationEnd);\n\n        resolve('Animation ended');\n      }\n\n      node.addEventListener('animationend', handleAnimationEnd);\n    })\n  }\n\n  handleClick() {\n    console.log('toggling phone');\n    var phoneBottom = document.getElementsByClassName(\"phone-messages-bottom\")[0];\n    clearInterval(this.phoneVibe);\n    this.setState({ showPhone: !this.state.showPhone }, () => {constants.scrollToBottom(phoneBottom)});\n  }\n\n  render() {\n    var zoomOutPhone = <div id=\"phone-layer\" className={this.classes} onClick={this.handleClick}></div>;\n    var zoomInPhone = \n      <BigPhone onClick={this.handleClick} className=\"bg-layer layer\" dataDepth=\"0.3\"/>;\n    if (this.state.showPhone) {\n      zoomOutPhone = <div id=\"phone-layer\" className='hide' onClick={this.handleClick}></div>;\n    }\n    else {\n      zoomInPhone = \n        <BigPhone className=\"hide\" onClick={this.handleClick} />;\n    }\n    return (\n      <>\n        {zoomInPhone}\n        {zoomOutPhone}\n      </>\n    );\n  }\n\n}\n","import React, { PureComponent } from 'react';\nimport Graffiti from './Graffiti';\nimport Parallax from 'parallax-js';\nimport * as constants from './constants';\nimport dotenv from 'dotenv';\n\ndotenv.config({ path: '.env' });\n\nconst bigNoteImg = `${constants.STATICURL}/images/closeup-note.png`;\n\nexport default class BigNote extends PureComponent {\n  constructor(props) { \n    super(props);\n  }\n\n  // componentDidMount() {\n  // }\n\n  // componentDidUpdate() {\n  // }\n\n  render() {\n    return (\n      <div id=\"big-note\" className={this.props.className} data-depth={this.props.dataDepth} onClick={this.props.onClick}>\n        <Graffiti id=\"note-canvas\" className=\"note-img\" />\n        <img className=\"note-img\" src={bigNoteImg} onClick={(e) => {e.stopPropagation(); e.nativeEvent.stopImmediatePropagation();}}/>\n      </div>\n    );\n  }\n\n}\n","import React, { PureComponent } from 'react';\nimport BigNote from './BigNote';\nimport Parallax from 'parallax-js';\n\nimport * as constants from './constants';\n\nexport default class Note extends PureComponent {\n  constructor(props) { \n    super(props);\n    this.classes = \"bg-layer\";\n    this.animateNote = this.animateNote.bind(this);\n    this.handleClick = this.handleClick.bind(this);\n    this.noteVibe = null;\n    this.state = { showNote: false, };\n  }\n\n  componentDidMount() {\n    this.noteVibe = setInterval(() => {\n      this.animateNote('#note-layer', 'pulse');\n    }, 3.5 * 1000);\n  }\n\n  componentDidUpdate() {\n    constants.restartParallax('.layer');\n    if (!this.state.showNote) {\n      this.animateNote('#big-note', 'fadeInUp');\n    }\n    else {\n      this.noteVibe = setInterval(() => {\n        this.animateNote('#note-layer', 'pulse');\n      }, 3.5 * 1000);\n    }\n  }\n\n  componentWillUnmount() {\n    // console.log('unmounting Note.js');\n    clearInterval(this.noteVibe);\n  }\n\n  animateNote(element, animationName) {\n    const node = document.querySelector(element);\n    if (node) {\n      new Promise((resolve, reject) => {\n        node.classList.add('animate__animated', `animate__${animationName}`);\n\n        function handleAnimationEnd() {\n          node.classList.remove('animate__animated', `animate__${animationName}`);\n          node.removeEventListener('animationend', handleAnimationEnd);\n\n          resolve('Animation ended');\n        }\n\n        node.addEventListener('animationend', handleAnimationEnd);\n      });\n    }\n  }\n\n  handleClick() {\n    console.log('toggling note');\n    clearInterval(this.noteVibe);\n    this.setState({ showNote: !this.state.showNote });\n  }\n\n  render() {\n    var zoomOutNote = <div id=\"note-layer\" className={this.classes} onClick={this.handleClick}></div>;\n    var zoomInNote = \n      <BigNote onClick={this.handleClick} className=\"bg-layer\" dataDepth=\"0.3\"/>;\n    if (this.state.showNote) {\n      zoomOutNote = <div id=\"note-layer\" className='hide' onClick={this.handleClick}></div>;\n    }\n    else {\n      zoomInNote = \n        <BigNote className=\"hide\" onClick={this.handleClick} />;\n    }\n    return (\n      <>\n        {zoomInNote}\n        {zoomOutNote}\n      </>\n    );\n  }\n\n}\n","import React, { Component } from 'react';\nimport Stall from './Stall';\nimport Button from './Button';\nimport Mirrors from './Mirrors';\nimport Hotspots from './Hotspots';\nimport Chatbox from './Chatbox';\nimport Phone from './Phone';\nimport Note from './Note';\nimport Parallax from 'parallax-js';\nimport Audio from './Audio';\n\nimport * as constants from './constants';\n\nimport dotenv from 'dotenv';\n\ndotenv.config({ path: '.env' });\n\nconst navUpButton = `${constants.STATICURL}/actions/flat-arrow-up.png`;\nconst navDownButton = `${constants.STATICURL}/actions/flat-arrow-down.png`;\nconst navLeftButton = `${constants.STATICURL}/actions/flat-arrow-left.png`;\nconst navRightButton = `${constants.STATICURL}/actions/flat-arrow-right.png`;\nconst navBackButton = `${constants.STATICURL}/actions/flat-arrow-back.png`;\nconst navExitButton = `${constants.STATICURL}/actions/exit.png`;\nconst chatNotification = `${constants.STATICURL}/chat-notification.svg`;\nconst flushAudio = `${constants.STATICURL}/sounds/short-flush.mp3`;\nconst bgAudioSrc = `${constants.STATICURL}/sounds/inside.mp3`;\n\nclass Room extends Component {\n  constructor(props) {\n    super(props);\n    this.pusher = props.pusher;\n    this.id = props.id;\n    this.presenceChannel = null;\n    this.me = null;\n    this.state = {\n      newAlert: false,\n      occupants: {members: [],count: 0},\n      userHex: '#ffffff',\n      currentView: 'stall-front',\n      showPhone: false,\n      userName: 'a stallmate',\n    };\n    this.max_occupancy = props.max;\n    this.updateOccupants = this.updateOccupants.bind(this);\n    this.countOccupants = this.countOccupants.bind(this);\n    this.handleNavigationClick = this.handleNavigationClick.bind(this);\n    this.handleFlush = this.handleFlush.bind(this);\n    this.restartParallax = this.restartParallax.bind(this);\n  }\n\n  componentDidMount() {\n    this.presenceChannel = this.pusher.subscribe(`presence-room-${this.id}`);\n    this.presenceChannel.bind('pusher:subscription_succeeded', () => {\n      this.me = this.presenceChannel.members.me.id;\n      this.setState(currentState => {\n        return {\n          userName: constants.PSEUDONYMS[parseInt(this.me) % constants.PSEUDONYMS.length],\n          userHex: '#' + Math.floor(parseInt(this.presenceChannel.members.me.id)*16777215).toString(16).slice(-6)\n        }\n      });\n      this.updateOccupants(this.presenceChannel.members);\n    });\n    this.presenceChannel.bind('pusher:member_added', (member) => {\n      this.updateOccupants(this.presenceChannel.members);\n    });\n    this.presenceChannel.bind('pusher:member_removed', (member) => {\n      this.updateOccupants(this.presenceChannel.members);\n      console.log(`Stall.js: ${member.id} left Stall ${this.id}`);\n    });\n    this.presenceChannel.bind('message', (data) => {\n      if (data.userId !== this.presenceChannel.members.me.id) {\n        const audioElement = document.getElementById(\"notification-sound\");\n        audioElement.play();\n        if (this.state.currentView !== 'stall-right') {\n          this.setState({ newAlert: true });\n        }\n      }\n    });\n  }\n\n  componentDidUpdate() {\n    // console.log(`occupants in stall`);\n    // console.log(this.state.occupants);\n    constants.restartParallax('.layer');\n  }\n\n  // returns true count of occupants (excluding spies)\n  countOccupants(members) {\n    var count = 0;\n    // console.log(`countOccupants() members in stall ${this.id}:`);\n    if (members.count > 0) {\n      members.each(function (member) {\n        if (!member.info.isSpy) { count++ }\n      });\n    }\n    return count\n  }\n\n  restartParallax() {\n    var container = document.getElementById('app');\n    var parallaxInstance = new Parallax(container, {\n      selector: '.layer',\n      pointerEvents: true,\n    });\n    console.log('restarting parallax');\n  }\n\n  updateOccupants(members) {\n    // console.log(`Stall.js updateOccupants: stall id ${this.id}, numOccupants ${members.count}`);\n    this.setState({\n      occupants: members,\n    }, () => this.props.onOccupancyChange(this.countOccupants(members), 'room', this.id));\n  }\n\n  handleFlush() {\n    const audioElement = document.getElementById(\"flush-audio\");\n    audioElement.play();\n  }\n\n  handleNavigationClick(target) {\n    if (target === 'stall-right') {\n      this.setState({ currentView: target, newAlert: false })\n    }\n    else {\n      this.setState({ currentView: target });\n    }\n  }\n\n  render() {\n    const stallFront = \n          <Stall direction=\"front\" handleNavigationClick={this.handleNavigationClick} className={this.state.currentView === 'stall-front' ? 'bg-div' : 'hide'}>\n            <Note />\n            <Hotspots>\n              <Button \n                onClick={() => this.handleNavigationClick('stall-up')} \n                altText=\"Stare At Ceiling\"\n                imgSrc={navUpButton}\n                top=\"7vh\"\n                left=\"50vw\"\n                 />\n              <Button \n                onClick={() => this.handleNavigationClick('stall-left')} \n                altText=\"Check Phone\"\n                imgSrc={navLeftButton}\n                top=\"53vh\"\n                left=\"10vw\"\n                 />\n              <Button \n                onClick={() => this.handleNavigationClick('stall-down')} \n                altText=\"Cry\"\n                imgSrc={navDownButton}\n                top=\"88vh\"\n                left=\"50vw\"\n                 />\n              <Button \n                onClick={() => this.handleNavigationClick('stall-right')} \n                altText=\"Talk to Stranger\"\n                imgSrc={navRightButton}\n                top=\"53vh\"\n                left=\"90vw\"\n                 />\n              <Button \n                onClick={() => this.handleNavigationClick('stall-back')} \n                altText=\"Flush/Exit\"\n                imgSrc={navBackButton}\n                top=\"98vh\"\n                left=\"23vw\"\n                 />\n            </Hotspots>\n          </Stall>;\n    var currentView = null;\n    const exit = <Button \n      className=\"nav-image\"\n      onClick={this.props.onExit}\n      top=\"12vh\"\n      left=\"84vw\"\n      width=\"80px\"\n      imgSrc={navExitButton} \n      />;\n    const newMsg = <Button \n      className={this.state.newAlert ? \"blue-glow msg-alert\" : \"hide\"}\n      onClick={() => this.handleNavigationClick('stall-right')}\n      top=\"90vh\"\n      left=\"90vw\"\n      width=\"80px\"\n      imgSrc={chatNotification} \n      />;\n    switch (this.state.currentView) {\n      case 'stall-up':\n        let seeSpider = this.me % 2 === 0 ? 'bg-layer' : 'hide';\n        currentView = \n          <Stall direction=\"up\" handleNavigationClick={this.handleNavigationClick} className=\"bg-div--responsive\">\n            <div id=\"hanging-spider\" className={seeSpider}></div>\n            <Hotspots>\n              <Button \n                onClick={() => this.handleNavigationClick('stall-front')} \n                altText=\"Flush/Exit\"\n                imgSrc={navDownButton}\n                top=\"87vh\"\n                left=\"57vw\"\n                 />\n            </Hotspots>\n          </Stall>;\n        this.restartParallax();\n        break;\n      case 'stall-left':\n        this.restartParallax();\n        break;\n      case 'stall-right': // contains chatbox\n        this.restartParallax();\n        break;\n      case 'stall-down':\n        currentView = \n          <Stall direction=\"down\" handleNavigationClick={this.handleNavigationClick} className=\"bg-div\">\n            <Hotspots>\n              <Button \n                onClick={() => this.handleNavigationClick('stall-front')} \n                altText=\"Gaze at Stall Door\"\n                imgSrc={navUpButton}\n                top=\"7vh\"\n                left=\"50vw\"\n                 />\n            </Hotspots>\n          </Stall>;\n        this.restartParallax();\n        break;\n      case 'stall-back':\n        currentView = \n          <Stall direction=\"back\" handleNavigationClick={this.handleNavigationClick} className=\"bg-div\">\n            <Hotspots>\n              <Button \n                onClick={() => this.handleNavigationClick('stall-front')} \n                altText=\"Gaze at Stall Door\"\n                imgSrc={navBackButton}\n                top=\"94vh\"\n                left=\"76vw\"\n                 />\n              <Button \n                onClick={() => this.handleNavigationClick('stall-right')} \n                altText=\"Talk to Stranger\"\n                imgSrc={navLeftButton}\n                top=\"53vh\"\n                left=\"10vw\"\n                 />\n              <Button \n                onClick={() => this.handleNavigationClick('stall-left')} \n                altText=\"Check Phone\"\n                imgSrc={navRightButton}\n                top=\"53vh\"\n                left=\"90vw\"\n                 />\n              <Button \n                onClick={() => this.handleFlush()} \n                altText=\"Flush\"\n                className=\"flush-button neon\"\n                >\n                Flush\n              </Button>\n            </Hotspots>\n          </Stall>;\n        this.restartParallax();\n        break;\n      case 'mirrors':\n        currentView =\n          <Mirrors />;\n          this.restartParallax();\n      case 'stall-front':\n      default:\n        this.restartParallax();\n        break;\n    }\n    var chatroomStall, phoneView;\n    if (this.presenceChannel && this.me) {\n      chatroomStall = <Stall className={this.state.currentView === 'stall-right' ? 'bg-div' : 'hide' } direction=\"right\" handleNavigationClick={this.handleNavigationClick}>\n            <Hotspots>\n              <Button \n                onClick={() => this.handleNavigationClick('stall-up')} \n                altText=\"Stare At Ceiling\"\n                imgSrc={navUpButton}\n                top=\"7vh\"\n                left=\"50vw\"\n                 />\n              <Button \n                onClick={() => this.handleNavigationClick('stall-down')} \n                altText=\"Cry\"\n                imgSrc={navDownButton}\n                top=\"88vh\"\n                left=\"50vw\"\n                 />\n              <Button \n                onClick={() => this.handleNavigationClick('stall-front')} \n                altText=\"Gaze at Stall\"\n                imgSrc={navLeftButton}\n                top=\"53vh\"\n                left=\"10vw\"\n                 />\n              <Button \n                onClick={() => this.handleNavigationClick('stall-back')} \n                altText=\"Flush\"\n                imgSrc={navRightButton}\n                top=\"53vh\"\n                left=\"90vw\"\n                 />\n              <Chatbox userName={this.state.userName} occupants={this.state.occupants} userHex={this.state.userHex} channel={this.presenceChannel} />\n            </Hotspots>\n        </Stall>;\n      phoneView = \n          <Stall direction=\"left\" handleNavigationClick={this.handleNavigationClick} className={this.state.currentView === 'stall-left' ? 'bg-div--responsive' : 'hide' }>\n            <Phone />\n            <Hotspots>\n              <Button \n                onClick={() => this.handleNavigationClick('stall-up')} \n                altText=\"Stare At Ceiling\"\n                imgSrc={navUpButton}\n                top=\"7vh\"\n                left=\"50vw\"\n                 />\n              <Button \n                onClick={() => this.handleNavigationClick('stall-down')} \n                altText=\"Cry\"\n                imgSrc={navDownButton}\n                top=\"88vh\"\n                left=\"50vw\"\n                 />\n              <Button \n                onClick={() => this.handleNavigationClick('stall-front')} \n                altText=\"Gaze at Stall\"\n                imgSrc={navRightButton}\n                top=\"53vh\"\n                left=\"90vw\"\n                 />\n              <Button \n                onClick={() => this.handleNavigationClick('stall-back')} \n                altText=\"Flush\"\n                imgSrc={navLeftButton}\n                top=\"53vh\"\n                left=\"10vw\"\n                 />\n            </Hotspots>\n          </Stall>;\n    }\n    return (\n      <div className=\"view\">\n        <div className=\"hide\">\n          <h2>Room {this.id}: {this.countOccupants(this.state.occupants)} / {this.max_occupancy}</h2>\n        </div>\n        <Audio id=\"background-audio\" audioSrc={bgAudioSrc} hidden=\"true\" autoplay=\"true\" loop={true} />\n        <Audio id=\"flush-audio\" audioSrc={flushAudio} hidden=\"true\" />\n        {currentView}\n        {stallFront}\n        {phoneView}\n        {chatroomStall}\n        {exit}\n        {newMsg}\n      </div>\n    );\n  }\n\n}\n\nexport default Room;","import React, { Component } from 'react';\nimport Pusher from 'pusher-js';\nimport dotenv from 'dotenv';\n\nimport Loading from './Loading';\nimport Hallway from './Hallway';\nimport WaitingRoom from './WaitingRoom';\nimport Room from './Room';\nimport Mirrors from './Mirrors';\n\nimport 'animate.css/animate.min.css';\nimport './css/normalize.css';\nimport './css/App.css';\n\nimport * as constants from './constants';\n\ndotenv.config({ path: '.env' });\n// const LOGGING = null;\nconst LOGGING = process.env.NODE_ENV === 'development';\n\nclass App extends Component {\n  constructor(props) {\n    super(props);\n\n    console.log(`running in ${process.env.NODE_ENV} mode`); \n\n    this.pusher = new Pusher(process.env.REACT_APP_PUSHER_APP_KEY, {\n      cluster: process.env.REACT_APP_PUSHER_APP_CLUSTER,\n      encrypted: true,\n    });\n    this.spy = new Pusher(process.env.REACT_APP_PUSHER_APP_KEY, {\n      encrypted: true,\n      cluster: process.env.REACT_APP_PUSHER_APP_CLUSTER,\n      auth: {\n        params: {\n          isSpy: true\n        }\n      }\n    });\n    this.timeoutId = null;\n    this.state = {\n      currentView: { type: 'loading', id: null },\n      rooms: [], // array of Room components\n      pusher_app_members: { count: 0 }, // pusher members object\n      ahead: null,\n      inLine: 0,\n      message: '',\n    };\n\n    this.appChannel = null;\n    this.queueChannel = null;\n\n    this.countMembers = this.countMembers.bind(this);\n    this.spyOn = this.spyOn.bind(this);\n    this.startInactivityCheck = this.startInactivityCheck.bind(this);\n    this.userActivityDetected = this.userActivityDetected.bind(this);\n    this.handleExitStall = this.handleExitStall.bind(this);\n    this.handleEnterHallway = this.handleEnterHallway.bind(this);\n    this.handleEnterWaiting = this.handleEnterWaiting.bind(this);\n    this.handleEnterRoom = this.handleEnterRoom.bind(this);\n    this.handleMouseMove = this.handleMouseMove.bind(this);\n    this.updateAppMembers = this.updateAppMembers.bind(this);\n    this.updateMemberCount = this.updateMemberCount.bind(this);\n    this.updateQueuePosition = this.updateQueuePosition.bind(this);\n  }\n\n  componentDidMount() {\n    // initiate all rooms\n    let roomsCopy = [];\n    for (var i = 0; i < constants.NUM_ROOMS; i++) {\n      roomsCopy.push({ id: i, occupants: 0 });\n    }\n    // update rooms state\n    this.setState({\n      rooms: roomsCopy,\n    }, () => {\n      // send spy to update room vacancies\n      this.spyOn('presence-queue', 'waiting');\n      for (var i = 0; i < constants.NUM_ROOMS; i++) {\n        this.spyOn(`presence-room-${i}`, 'room');\n      }\n    });\n\n    // main app channel\n    this.appChannel = this.pusher.subscribe('presence-app');\n    this.appChannel.bind('pusher:subscription_succeeded', (member) => {\n      // console.log(member);\n      this.updateAppMembers(this.appChannel.members);\n      if (LOGGING) { console.log('Subscribed to Bathroom App'); }\n    });\n    this.appChannel.bind('pusher:member_added', (member) => {\n      this.updateAppMembers(this.appChannel.members);\n      if (LOGGING) {\n        console.log(`${member.id} joined Bathroom App`);\n        console.log(this.appChannel.members);\n      }\n    });\n    // someone left App\n    this.appChannel.bind('pusher:member_removed', (member) => {\n      this.updateAppMembers(this.appChannel.members);\n      if (LOGGING) { \n        console.log(`${member.id} left Bathroom App`); \n        console.log(this.appChannel.members);\n      }\n    });\n  }\n\n  // shouldComponentUpdate(nextProps, nextState) {\n  //   if (this.state.currentView !== nextState.currentView || \n  //     this.state.rooms !== nextState.rooms\n\n  //     ) {\n  //     return true\n  //   }\n  //   return false\n  // }\n\n  componentWillUnmount() {\n    this.pusher.unsubscribe('presence-app');\n  }\n\n  // returns the number of members connected to channel\n  // excluding spies\n  countMembers(channel) {\n    var count = 0;\n    channel.members.each(function (member) {\n      if (!member.info.isSpy) { \n        // console.log(`user: ${member.id} in ${channel.name}`); \n        count++; \n      }\n    });\n    return count\n  };\n\n  // generic 'true' member count (excludes spies)\n  // num      :  number of true members\n  // location :  location (by view name)\n  // roomId   :  presence-room id (if in stall)\n  // RETURNS  :  null\n  updateMemberCount(num, location, roomId) {\n    if (location === 'room') {\n      var roomsCopy = Array.from(this.state.rooms);\n      roomsCopy[roomId] = { id: roomId, occupants: num };\n      this.setState(currentState => {\n        return {\n          rooms: roomsCopy,\n        }\n      });\n    }\n    else if (location === 'waiting') {\n      this.setState(currentState => {\n        return { inLine: num }\n      });\n    }\n  }\n\n  // in app\n  updateAppMembers(members) {\n    this.setState((prevState) => {\n      return { pusher_app_members: members, }\n    });\n  }\n\n  // spy on a channel\n  spyOn(channelName, location) {\n    var channel = this.spy.subscribe(channelName);\n    var roomId = null;\n    if (location === 'room') {\n      roomId = channelName.split('-').pop();\n    }\n    if (LOGGING) {\n      console.log(`trying to spy on ${channel.name}`);\n    }\n    channel.bind(\"pusher:subscription_succeeded\", () => {\n      // if (LOGGING) { console.log(`spying on ${channelName}`); }\n      this.updateMemberCount(this.countMembers(channel), location, roomId);\n    });\n    channel.bind(\"pusher:member_added\", (member) => {\n      this.updateMemberCount(this.countMembers(channel), location, roomId);\n    });\n    channel.bind(\"pusher:member_removed\", (member) => {\n      if (!member.info.isSpy) { if (LOGGING) { console.log(`${member.id} left ${channelName}`); } }\n      this.updateMemberCount(this.countMembers(channel), location, roomId);\n    });\n  };\n\n  startInactivityCheck() {\n    // console.log('starting timer for inactivity');\n    this.timeoutId = window.setTimeout(() => {\n      this.pusher.disconnect();\n    }, constants.TIMEOUT); // SET TIMEOUT: time out after 5 minutes\n  }\n\n  updateQueuePosition(presenceChannel) {\n    let me = presenceChannel.members.me.id;\n    let trueOccupants = [];\n    if (presenceChannel.members.count > 0) {\n      presenceChannel.members.each((visitor) => {\n        if (!visitor.info.isSpy) {\n          trueOccupants.push(visitor);\n        }\n      });\n      trueOccupants = constants.sortByEntryTime(trueOccupants);\n    }\n    console.log(`trueOccupants:`);\n    console.log(trueOccupants);\n    let ahead = trueOccupants.map((e) => { return e.id.toString() }).indexOf(me.toString());\n    this.setState({ ahead: ahead });\n  }\n\n  userActivityDetected() {\n    // timeout can be cleared from anywhere\n    if (this.timeoutId !== null) {\n      window.clearTimeout(this.timeoutId);\n    }\n    // can be timed out of stall\n    if (this.state.currentView.type === 'room') {\n      this.startInactivityCheck();\n    }\n    // can be timed out at head (first 3) of queue\n    if (this.state.currentView.type === 'waiting' && this.state.ahead < 3) {\n      this.startInactivityCheck();\n    }\n    if (this.pusher.connection.state === 'disconnected') {\n      alert(`You've been ushered out for taking too long! Please line up again to re-enter the bathroom.`);\n      window.location.reload();\n    }\n  }\n\n  /* BEGIN: View transition functions \n    -----------------------------------\n  */\n  // stall -> mirrors\n  handleExitStall(e) {\n    if (window.confirm(\"Ready to leave the bathroom?\")) {\n      this.setState(currentState => {\n        return {\n          currentView: { type: 'mirrors', id: null },\n        }\n      },\n      () => { constants.restartParallax('.layer');\n      });\n    }\n  }\n\n  handleEnterHallway(e) {\n    this.setState(currentState => {\n      return {\n        currentView: { type: 'hallway', id: null },\n      }\n    },\n    () => {constants.restartParallax('.layer');});\n  }\n\n  // hallway -> wait for stall\n  handleEnterWaiting(e) {\n    this.setState(currentState => {\n      return {\n        currentView: { type: 'waiting', id: null },\n      }\n    },\n    () => { \n      constants.restartParallax('.layer'); \n      this.queueChannel = this.pusher.subscribe(`presence-queue`);\n      this.queueChannel.bind('pusher:subscription_succeeded', () => {\n        console.log('Joined Waiting Room');\n        this.updateMemberCount(this.countMembers(this.queueChannel), 'waiting');\n        this.updateQueuePosition(this.queueChannel);\n      });\n      this.queueChannel.bind('pusher:member_added', () => {\n        this.updateMemberCount(this.countMembers(this.queueChannel), 'waiting');\n      });\n      this.queueChannel.bind('pusher:member_removed', (member) => {\n        this.updateMemberCount(this.countMembers(this.queueChannel), 'waiting');\n        this.updateQueuePosition(this.queueChannel);\n        if (!member.info.isSpy) { console.log(`WaitingRoom.js: someone left the queue`); }\n      });\n\n    });\n  }\n\n  // waiting -> stall\n  handleEnterRoom(e) {\n    var roomEntered = false;\n    this.pusher.unsubscribe('presence-queue'); \n\n    // check all rooms for vacancy\n    for (var i = 0; !roomEntered && i < this.state.rooms.length; i++) {\n      var currentRoom = {...this.state.rooms[i]};\n      let roomId = i;\n      if (currentRoom.occupants < constants.MAX_OCCUPANCY) {\n        this.updateMemberCount(currentRoom.occupants+1, 'room', i);\n        this.setState(currentState => {\n          return {\n            currentView: { type: 'room', id: roomId },\n          };\n        }, () => { constants.restartParallax('.layer') });\n        roomEntered = true;\n      }\n      else {\n        console.log(`Room ${i} full`);\n      }\n    }\n\n    if (!roomEntered) {\n      alert('Sorry, no vacant stalls currently available!');\n    }\n  }\n\n  handleMouseMove() {\n    this.userActivityDetected();\n  }\n\n  render() {\n    var hide = false;\n    if (process.env.NODE_ENV === 'production') {\n      hide = 'hide';\n    }\n\n    // if (LOGGING) { console.log('rendering App.js'); }\n    // if (LOGGING) { console.log(this.state.rooms); hide = null }\n\n    // Render debug console data\n    var rooms = 'Initiating rooms...';\n    if (this.state.rooms.length === constants.NUM_ROOMS) {\n      rooms = this.state.rooms.map((room) =>\n        <li key={room.id.toString()}><strong>Room {room.id}:</strong> {room.occupants}/{constants.MAX_OCCUPANCY}</li>\n      );\n    }\n\n    const vacancies = constants.MAX_OCCUPANCY * constants.NUM_ROOMS - this.state.rooms.map((room) => room.occupants ).reduce((a, b) => a + b, 0);\n    let currentView = <Loading onLoad={this.handleEnterHallway} />;\n    if (this.state.currentView.type === 'hallway') {\n      currentView = <Hallway onEnterBathroom={this.handleEnterWaiting} />;\n    } \n    else if (this.state.currentView.type === 'mirrors') {\n      currentView = <Mirrors />;\n    }\n    else if (this.state.currentView.type === 'waiting') { \n      currentView = <WaitingRoom queuePosition={this.state.ahead} inLineTotal={this.state.inLine} currentVacancies={vacancies} handleEnterRoomClick={this.handleEnterRoom} />; \n    }\n    if (this.state.currentView.type === 'room') {\n      currentView = <Room id={this.state.currentView.id} pusher={this.pusher} max={constants.MAX_OCCUPANCY} onOccupancyChange={this.updateMemberCount} onExit={this.handleExitStall} />;\n    }\n    return (\n      <div id=\"app\" onMouseMove={this.handleMouseMove}>\n        <div id=\"debug-console\" className={hide ? 'hide' : undefined}>\n          <div>\n            THE APP IS RUNNING IN <strong>{process.env.NODE_ENV}</strong> MODE<br/>\n            this box is for development purposes only\n          </div>\n          <div>\n            <div>Number of Rooms: {constants.NUM_ROOMS}</div>\n            <div><strong>Current Users:</strong> {this.state.pusher_app_members.count}</div>\n            <div><strong>In line:</strong> {this.state.inLine}</div>\n            <div><strong>Vacancies:</strong> {vacancies}</div>\n          </div>\n          <div>\n            <strong>Rooms:</strong>\n            {rooms}\n          </div>\n        </div>\n        {currentView}\n      </div>\n    );\n  }\n\n}\n\nexport default App;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}